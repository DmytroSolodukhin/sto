this.Templates=this.Templates||{},this.Templates.cart__item=Handlebars.template({1:function(g,f,j,i){var h;return'<span class="cart__discounted">'+this.escapeExpression((h=null!=(h=f.discounted||(null!=g?g.discounted:g))?h:f.helperMissing,"function"==typeof h?h.call(g,{name:"discounted",hash:{},data:i}):h))+" kr</span>"},3:function(g,f,j,i){var h;return'<a href="'+this.escapeExpression((h=null!=(h=f.url||(null!=g?g.url:g))?h:f.helperMissing,"function"==typeof h?h.call(g,{name:"url",hash:{},data:i}):h))+'">'},5:function(g,f,j,i){var h;return this.escapeExpression((h=null!=(h=f.name||(null!=g?g.name:g))?h:f.helperMissing,"function"==typeof h?h.call(g,{name:"name",hash:{},data:i}):h))},7:function(g,f,j,i){var h;return this.escapeExpression(this.lambda(null!=(h=null!=g?g.base:g)?h.name:h,g))},9:function(f,e,h,g){return"</a>"},11:function(i,h,n,m){var l,k=this.lambda,j=this.escapeExpression;return"	<p><strong>"+j(k(null!=(l=null!=i?i.base:i)?l.name:l,i))+":</strong> "+j(k(null!=(l=null!=(l=null!=i?i.base:i)?l.description:l)?l.text:l,i))+"</p>\n	<p><strong>"+j(k(null!=(l=null!=i?i.extension:i)?l.name:l,i))+":</strong> "+j(k(null!=(l=null!=(l=null!=i?i.extension:i)?l.description:l)?l.text:l,i))+"</p>\n"},13:function(g,f,j,i){var h;return"	<p>"+this.escapeExpression(this.lambda(null!=(h=null!=(h=null!=g?g.base:g)?h.description:h)?h.text:h,g))+"</p>\n"},15:function(h,g,l,k){var j,i;return'<div class="quantity-picker '+(null!=(j=g["if"].call(h,null!=h?h.removable:h,{name:"if",hash:{},fn:this.program(16,k,0),inverse:this.noop,data:k}))?j:"")+'">\n	<button class="quantity-picker__controller quantity-picker__controller--remove" data-alert="Er du sikker på at du vil fjerne produktet fra handlelisten?">x</button>\n	<button class="quantity-picker__controller quantity-picker__controller--minus">-</button>\n	<input type="number" min="1" class="quantity-picker__input" value="'+this.escapeExpression((i=null!=(i=g.quantity||(null!=h?h.quantity:h))?i:g.helperMissing,"function"==typeof i?i.call(h,{name:"quantity",hash:{},data:k}):i))+'">\n	<button class="quantity-picker__controller quantity-picker__controller--plus">+</button>\n</div>\n'},16:function(f,e,h,g){return"quantity-picker--removable"},compiler:[6,">= 2.0.0-beta.1"],main:function(h,g,l,k){var j,i;return'<p class="cart__price">'+(null!=(j=g["if"].call(h,null!=h?h.discounted:h,{name:"if",hash:{},fn:this.program(1,k,0),inverse:this.noop,data:k}))?j:"")+this.escapeExpression((i=null!=(i=g.price||(null!=h?h.price:h))?i:g.helperMissing,"function"==typeof i?i.call(h,{name:"price",hash:{},data:k}):i))+' kr</p>\n\n<h3 class="cart__title">\n	'+(null!=(j=g["if"].call(h,null!=h?h.url:h,{name:"if",hash:{},fn:this.program(3,k,0),inverse:this.noop,data:k}))?j:"")+"\n		"+(null!=(j=g["if"].call(h,null!=h?h.name:h,{name:"if",hash:{},fn:this.program(5,k,0),inverse:this.program(7,k,0),data:k}))?j:"")+"\n	"+(null!=(j=g["if"].call(h,null!=h?h.url:h,{name:"if",hash:{},fn:this.program(9,k,0),inverse:this.noop,data:k}))?j:"")+"\n</h3>\n\n"+(null!=(j=g["if"].call(h,null!=h?h.extension:h,{name:"if",hash:{},fn:this.program(11,k,0),inverse:this.program(13,k,0),data:k}))?j:"")+"\n"+(null!=(j=g["if"].call(h,null!=h?h.quantity:h,{name:"if",hash:{},fn:this.program(15,k,0),inverse:this.noop,data:k}))?j:"")},useData:!0}),this.Templates.cart__itempayment=Handlebars.template({1:function(g,f,j,i){var h;return this.escapeExpression((h=null!=(h=f.name||(null!=g?g.name:g))?h:f.helperMissing,"function"==typeof h?h.call(g,{name:"name",hash:{},data:i}):h))},3:function(g,f,j,i){var h;return this.escapeExpression(this.lambda(null!=(h=null!=g?g.base:g)?h.name:h,g))},5:function(g,f,j,i){var h;return'<a href="'+this.escapeExpression((h=null!=(h=f.url||(null!=g?g.url:g))?h:f.helperMissing,"function"==typeof h?h.call(g,{name:"url",hash:{},data:i}):h))+'">'},7:function(f,e,h,g){return"</a>"},9:function(i,h,n,m){var l,k=this.lambda,j=this.escapeExpression;return"		<p><strong>"+j(k(null!=(l=null!=i?i.base:i)?l.name:l,i))+":</strong> "+j(k(null!=(l=null!=(l=null!=i?i.base:i)?l.description:l)?l.text:l,i))+"</p>\n		<p><strong>"+j(k(null!=(l=null!=i?i.extension:i)?l.name:l,i))+":</strong> "+j(k(null!=(l=null!=(l=null!=i?i.extension:i)?l.description:l)?l.text:l,i))+"</p>\n"},11:function(g,f,j,i){var h;return"		<p>"+this.escapeExpression(this.lambda(null!=(h=null!=(h=null!=g?g.base:g)?h.description:h)?h.text:h,g))+"</p>\n"},13:function(g,f,j,i){var h;return'<p class="cart__discounted">'+this.escapeExpression((h=null!=(h=f.discounted||(null!=g?g.discounted:g))?h:f.helperMissing,"function"==typeof h?h.call(g,{name:"discounted",hash:{},data:i}):h))+" kr</p>"},compiler:[6,">= 2.0.0-beta.1"],main:function(i,h,n,m){var l,k,j=this.escapeExpression;return'<td>\n	<img class="cart__image" src="'+j(this.lambda(null!=(l=null!=i?i.base:i)?l.image:l,i))+'" alt="'+(null!=(l=h["if"].call(i,null!=i?i.name:i,{name:"if",hash:{},fn:this.program(1,m,0),inverse:this.program(3,m,0),data:m}))?l:"")+'">\n</td>\n<td>\n	<h3 class="cart__title test">\n		'+(null!=(l=h["if"].call(i,null!=i?i.url:i,{name:"if",hash:{},fn:this.program(5,m,0),inverse:this.noop,data:m}))?l:"")+"\n			"+(null!=(l=h["if"].call(i,null!=i?i.name:i,{name:"if",hash:{},fn:this.program(1,m,0),inverse:this.program(3,m,0),data:m}))?l:"")+"\n		"+(null!=(l=h["if"].call(i,null!=i?i.url:i,{name:"if",hash:{},fn:this.program(7,m,0),inverse:this.noop,data:m}))?l:"")+"\n	</h3>\n\n"+(null!=(l=h["if"].call(i,null!=i?i.extension:i,{name:"if",hash:{},fn:this.program(9,m,0),inverse:this.program(11,m,0),data:m}))?l:"")+'\n</td>\n<td class="cart__prices">\n	'+(null!=(l=h["if"].call(i,null!=i?i.discounted:i,{name:"if",hash:{},fn:this.program(13,m,0),inverse:this.noop,data:m}))?l:"")+"\n	<p>"+j((k=null!=(k=h.price||(null!=i?i.price:i))?k:h.helperMissing,"function"==typeof k?k.call(i,{name:"price",hash:{},data:m}):k))+" kr</p>\n</td>"},useData:!0}),this.Templates.cart__row=Handlebars.template({1:function(g,f,j,i){var h;return this.escapeExpression((h=null!=(h=f.name||(null!=g?g.name:g))?h:f.helperMissing,"function"==typeof h?h.call(g,{name:"name",hash:{},data:i}):h))},3:function(g,f,j,i){var h;return this.escapeExpression(this.lambda(null!=(h=null!=g?g.base:g)?h.name:h,g))},5:function(g,f,j,i){var h;return'<a href="'+this.escapeExpression((h=null!=(h=f.url||(null!=g?g.url:g))?h:f.helperMissing,"function"==typeof h?h.call(g,{name:"url",hash:{},data:i}):h))+'">'},7:function(f,e,h,g){return"</a>"},9:function(i,h,n,m){var l,k=this.lambda,j=this.escapeExpression;return"		<p><strong>"+j(k(null!=(l=null!=i?i.base:i)?l.name:l,i))+":</strong> "+j(k(null!=(l=null!=(l=null!=i?i.base:i)?l.description:l)?l.text:l,i))+"</p>\n		<p><strong>"+j(k(null!=(l=null!=i?i.extension:i)?l.name:l,i))+":</strong> "+j(k(null!=(l=null!=(l=null!=i?i.extension:i)?l.description:l)?l.text:l,i))+"</p>\n"},11:function(g,f,j,i){var h;return"		<p>"+this.escapeExpression(this.lambda(null!=(h=null!=(h=null!=g?g.base:g)?h.description:h)?h.text:h,g))+"</p>\n"},13:function(g,f,j,i){var h;return'	<div class="quantity-picker">\n		<button class="quantity-picker__controller quantity-picker__controller--remove" data-alert="Er du sikker på at du vil fjerne produktet fra handlelisten?">x</button>\n		<button class="quantity-picker__controller quantity-picker__controller--minus">-</button>\n		<input type="number" min="1" class="quantity-picker__input" value="'+this.escapeExpression((h=null!=(h=f.quantity||(null!=g?g.quantity:g))?h:f.helperMissing,"function"==typeof h?h.call(g,{name:"quantity",hash:{},data:i}):h))+'">\n		<button class="quantity-picker__controller quantity-picker__controller--plus">+</button>\n	</div>\n'},15:function(g,f,j,i){var h;return'<p class="cart__discounted">'+this.escapeExpression((h=null!=(h=f.discounted||(null!=g?g.discounted:g))?h:f.helperMissing,"function"==typeof h?h.call(g,{name:"discounted",hash:{},data:i}):h))+" kr</p>"},compiler:[6,">= 2.0.0-beta.1"],main:function(i,h,n,m){var l,k,j=this.escapeExpression;return'<td>\n	<img class="cart__image" src="'+j(this.lambda(null!=(l=null!=i?i.base:i)?l.image:l,i))+'" alt="'+(null!=(l=h["if"].call(i,null!=i?i.name:i,{name:"if",hash:{},fn:this.program(1,m,0),inverse:this.program(3,m,0),data:m}))?l:"")+'">\n</td>\n<td>\n	<h3 class="cart__title test">\n		'+(null!=(l=h["if"].call(i,null!=i?i.url:i,{name:"if",hash:{},fn:this.program(5,m,0),inverse:this.noop,data:m}))?l:"")+"\n			"+(null!=(l=h["if"].call(i,null!=i?i.name:i,{name:"if",hash:{},fn:this.program(1,m,0),inverse:this.program(3,m,0),data:m}))?l:"")+"\n		"+(null!=(l=h["if"].call(i,null!=i?i.url:i,{name:"if",hash:{},fn:this.program(7,m,0),inverse:this.noop,data:m}))?l:"")+"\n	</h3>\n\n"+(null!=(l=h["if"].call(i,null!=i?i.extension:i,{name:"if",hash:{},fn:this.program(9,m,0),inverse:this.program(11,m,0),data:m}))?l:"")+"\n</td>\n<td>\n"+(null!=(l=h["if"].call(i,null!=i?i.quantity:i,{name:"if",hash:{},fn:this.program(13,m,0),inverse:this.noop,data:m}))?l:"")+'</td>\n<td class="cart__prices">\n	'+(null!=(l=h["if"].call(i,null!=i?i.discounted:i,{name:"if",hash:{},fn:this.program(15,m,0),inverse:this.noop,data:m}))?l:"")+"\n	<p>"+j((k=null!=(k=h.price||(null!=i?i.price:i))?k:h.helperMissing,"function"==typeof k?k.call(i,{name:"price",hash:{},data:m}):k))+" kr</p>\n</td>"},useData:!0}),this.Templates.customize__category=Handlebars.template({1:function(f,e,h,g){return" is-open "},3:function(f,e,h,g){return" closed "},compiler:[6,">= 2.0.0-beta.1"],main:function(r,q,p,o){var n,m,l=q.helperMissing,k="function",j=this.escapeExpression;return'<li>\n	<a href="#" class="list-menu__link list-menu__link--active '+(null!=(n=q["if"].call(r,null!=r?r.open:r,{name:"if",hash:{},fn:this.program(1,o,0),inverse:this.noop,data:o}))?n:"")+'" data-expand="#custom-'+j((m=null!=(m=q.os_category_id||(null!=r?r.os_category_id:r))?m:l,typeof m===k?m.call(r,{name:"os_category_id",hash:{},data:o}):m))+"-"+j((m=null!=(m=q.cid||(null!=r?r.cid:r))?m:l,typeof m===k?m.call(r,{name:"cid",hash:{},data:o}):m))+'" id="'+j((m=null!=(m=q.dropdownId||(null!=r?r.dropdownId:r))?m:l,typeof m===k?m.call(r,{name:"dropdownId",hash:{},data:o}):m))+'">'+j((m=null!=(m=q.name||(null!=r?r.name:r))?m:l,typeof m===k?m.call(r,{name:"name",hash:{},data:o}):m))+'</a>\n	<div class="dropdown '+(null!=(n=q.unless.call(r,null!=r?r.open:r,{name:"unless",hash:{},fn:this.program(3,o,0),inverse:this.noop,data:o}))?n:"")+'" id="custom-'+j((m=null!=(m=q.os_category_id||(null!=r?r.os_category_id:r))?m:l,typeof m===k?m.call(r,{name:"os_category_id",hash:{},data:o}):m))+"-"+j((m=null!=(m=q.cid||(null!=r?r.cid:r))?m:l,typeof m===k?m.call(r,{name:"cid",hash:{},data:o}):m))+'"></div>\n</li>\n'},useData:!0}),this.Templates.customize__ingredient=Handlebars.template({1:function(i,h,n,m){var l,k,j=this.escapeExpression;return'data-radio-open="#custom-'+j(this.lambda(null!=(l=null!=i?i.extra:i)?l.os_product_id:l,i))+"-"+j((k=null!=(k=h.cid||(null!=i?i.cid:i))?k:h.helperMissing,"function"==typeof k?k.call(i,{name:"cid",hash:{},data:m}):k))+'"'},3:function(f,e,h,g){return"checked"},5:function(t,s,r,q){var p,o,n=this.lambda,m=this.escapeExpression,l=s.helperMissing,k="function";return'<div id="custom-'+m(n(null!=(p=null!=t?t.extra:t)?p.os_product_id:p,t))+"-"+m((o=null!=(o=s.cid||(null!=t?t.cid:t))?o:l,typeof o===k?o.call(t,{name:"cid",hash:{},data:q}):o))+'" class="form-group hidden">\n	<div class="form-group__field form-group__field--checkbox form-group__sub">\n		<input type="checkbox" name="extra'+m(n(null!=(p=null!=t?t.extra:t)?p.os_product_id:p,t))+'" id="extra'+m(n(null!=(p=null!=t?t.extra:t)?p.os_product_id:p,t))+"-"+m((o=null!=(o=s.cid||(null!=t?t.cid:t))?o:l,typeof o===k?o.call(t,{name:"cid",hash:{},data:q}):o))+'" data-ingredient-parent="'+m((o=null!=(o=s.os_product_id||(null!=t?t.os_product_id:t))?o:l,typeof o===k?o.call(t,{name:"os_product_id",hash:{},data:q}):o))+'" value="1" '+(null!=(p=s["if"].call(t,null!=(p=null!=t?t.extra:t)?p.included:p,{name:"if",hash:{},fn:this.program(3,q,0),inverse:this.noop,data:q}))?p:"")+'>\n		<label for="extra'+m(n(null!=(p=null!=t?t.extra:t)?p.os_product_id:p,t))+"-"+m((o=null!=(o=s.cid||(null!=t?t.cid:t))?o:l,typeof o===k?o.call(t,{name:"cid",hash:{},data:q}):o))+'">Ekstra</label>\n	</div>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(r,q,p,o){var n,m,l=q.helperMissing,k="function",j=this.escapeExpression;return'<div class="form-group">\n	<div class="form-group__field form-group__field--checkbox">\n		<input type="checkbox" name="main'+j((m=null!=(m=q.os_product_id||(null!=r?r.os_product_id:r))?m:l,typeof m===k?m.call(r,{name:"os_product_id",hash:{},data:o}):m))+'" id="main'+j((m=null!=(m=q.os_product_id||(null!=r?r.os_product_id:r))?m:l,typeof m===k?m.call(r,{name:"os_product_id",hash:{},data:o}):m))+"-"+j((m=null!=(m=q.cid||(null!=r?r.cid:r))?m:l,typeof m===k?m.call(r,{name:"cid",hash:{},data:o}):m))+'" value="1" '+(null!=(n=q["if"].call(r,null!=r?r.extra:r,{name:"if",hash:{},fn:this.program(1,o,0),inverse:this.noop,data:o}))?n:"")+" "+(null!=(n=q["if"].call(r,null!=r?r.included:r,{name:"if",hash:{},fn:this.program(3,o,0),inverse:this.noop,data:o}))?n:"")+'>\n		<label for="main'+j((m=null!=(m=q.os_product_id||(null!=r?r.os_product_id:r))?m:l,typeof m===k?m.call(r,{name:"os_product_id",hash:{},data:o}):m))+"-"+j((m=null!=(m=q.cid||(null!=r?r.cid:r))?m:l,typeof m===k?m.call(r,{name:"cid",hash:{},data:o}):m))+'">'+j((m=null!=(m=q.name||(null!=r?r.name:r))?m:l,typeof m===k?m.call(r,{name:"name",hash:{},data:o}):m))+"</label>\n	</div>\n</div>\n\n"+(null!=(n=q["if"].call(r,null!=r?r.extra:r,{name:"if",hash:{},fn:this.program(5,o,0),inverse:this.noop,data:o}))?n:"")},useData:!0}),this.Templates.customize__productinfo=Handlebars.template({1:function(i,h,n,m){var l,k=this.lambda,j=this.escapeExpression;return"<h4>"+j(k(null!=(l=null!=(l=null!=(l=null!=i?i.base:i)?l.variant:l)?l.ingredients:l)?l.title:l,i))+"</h4>\n<p>\n	<strong>"+j(k(null!=(l=null!=i?i.base:i)?l.name:l,i))+":</strong> "+(null!=(l=k(null!=(l=null!=(l=null!=(l=null!=i?i.base:i)?l.variant:l)?l.ingredients:l)?l.text:l,i))?l:"")+"<br />\n	<strong>"+j(k(null!=(l=null!=i?i.extension:i)?l.name:l,i))+":</strong> "+(null!=(l=k(null!=(l=null!=(l=null!=(l=null!=i?i.extension:i)?l.variant:l)?l.ingredients:l)?l.text:l,i))?l:"")+"\n</p>\n"},3:function(h,g,l,k){var j,i=this.lambda;return"<h4>"+this.escapeExpression(i(null!=(j=null!=(j=null!=(j=null!=h?h.base:h)?j.variant:j)?j.ingredients:j)?j.title:j,h))+"</h4>\n<p>"+(null!=(j=i(null!=(j=null!=(j=null!=(j=null!=h?h.base:h)?j.variant:j)?j.ingredients:j)?j.text:j,h))?j:"")+"</p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(g,f,j,i){var h;return null!=(h=f["if"].call(g,null!=g?g.extension:g,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?h:""},useData:!0}),this.Templates.customize__productthumb=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(r,q,p,o){var n,m,l=q.helperMissing,k="function",j=this.escapeExpression;return'<div class="grid__elm" data-link-block>\n\n	<div class="product-thumb">\n		<a href="#" data-product-id="'+j((m=null!=(m=q.os_product_id||(null!=r?r.os_product_id:r))?m:l,typeof m===k?m.call(r,{name:"os_product_id",hash:{},data:o}):m))+'"><img class="product-thumb__image" src="'+j((m=null!=(m=q.image||(null!=r?r.image:r))?m:l,typeof m===k?m.call(r,{name:"image",hash:{},data:o}):m))+'" alt="'+j((m=null!=(m=q.name||(null!=r?r.name:r))?m:l,typeof m===k?m.call(r,{name:"name",hash:{},data:o}):m))+'"></a>\n		<div class="product-thumb__name">\n			<h3>'+j((m=null!=(m=q.number||(null!=r?r.number:r))?m:l,typeof m===k?m.call(r,{name:"number",hash:{},data:o}):m))+"</h3>\n			<h2>"+j((m=null!=(m=q.name||(null!=r?r.name:r))?m:l,typeof m===k?m.call(r,{name:"name",hash:{},data:o}):m))+'</h2>\n			<i class="product-thumb__tag product-thumb__tag--hot"></i>\n			<i class="product-thumb__tag product-thumb__tag--veg"></i>\n		</div>\n		<div class="product-thumb__description">\n			<p>'+(null!=(m=null!=(m=q.description_short||(null!=r?r.description_short:r))?m:l,n=typeof m===k?m.call(r,{name:"description_short",hash:{},data:o}):m)?n:"")+'</p>\n		</div>\n		<div class="product-thumb__prices">\n			<div class="product-thumb__price">\n				<p class="product-thumb__price-amount">'+j((m=null!=(m=q.price||(null!=r?r.price:r))?m:l,typeof m===k?m.call(r,{name:"price",hash:{},data:o}):m))+"</p>\n			</div>\n		</div>\n	</div>\n\n</div>"},useData:!0}),this.Templates["form__addressfinder-item"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(g,f,j,i){var h;return'<a class="form-group__dropdown-item" href="#">'+this.escapeExpression((h=null!=(h=f.description||(null!=g?g.description:g))?h:f.helperMissing,"function"==typeof h?h.call(g,{name:"description",hash:{},data:i}):h))+"</a>"},useData:!0}),this.Templates["form__restaurantfinder-item"]=Handlebars.template({1:function(f,e,h,g){return'<p class="uppercase green">Åpen</p>\n'},3:function(f,e,h,g){return'<p class="uppercase red">Stengt</p>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(r,q,p,o){var n,m,l=q.helperMissing,k="function",j=this.escapeExpression;return'<a href="#" tabindex="-1">'+j((m=null!=(m=q.name||(null!=r?r.name:r))?m:l,typeof m===k?m.call(r,{name:"name",hash:{},data:o}):m))+"</a>\n<p>"+j((m=null!=(m=q.address||(null!=r?r.address:r))?m:l,typeof m===k?m.call(r,{name:"address",hash:{},data:o}):m))+"</p>\n\n"+(null!=(n=q["if"].call(r,null!=r?r.isOpen:r,{name:"if",hash:{},fn:this.program(1,o,0),inverse:this.program(3,o,0),data:o}))?n:"")+"\n<p>"+j((m=null!=(m=q.openingHourString||(null!=r?r.openingHourString:r))?m:l,typeof m===k?m.call(r,{name:"openingHourString",hash:{},data:o}):m))+"</p>"},useData:!0}),this.Templates.form__restaurantfinder=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(f,e,h,g){return""},useData:!0}),this.Templates.map__infowindow=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(f,e,h,g){return'<div style="overflow: auto;">\n	<p class="location" style="display: none;"><span class="distance">2</span> km</p>\n	<h3>Dolly Dimple\'s NAF-huset</h3>\n	<p>Storgata 2</p>\n	<p>0155 Oslo</p>\n	<p><a href="/backoffice/restaurant/1001">Se åpningstider</a></p>\n</div>'},useData:!0}),this.Templates.popup__delivery=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(f,e,h,g){return'<div class="popup__content popup__content--narrow restaurant-list">\n	\n	<h2>…PSSST!</h2>\n\n	<form action="" novalidate>\n\n		<h3>SPAR PENGER VED Å HENTE SELV</h3>\n\n		<p>Din nærmeste Dolly Dimple\'s restaurant er:</p>\n\n		<ul id="restaurant-suggestion" class="restaurant-list"></ul>\n\n		<p>Ønsker du å bestille ‘Pizza Italia’ kan denne kun hentes. Gå tilbake for å endre bestillingsmåte, eller gå videre.</p>\n\n		<hr>\n\n		<div class="form-group">\n			<div class="form-group__field">\n				<button class="form-group__btn form-group__btn--next" type="submit">Gå videre</button>\n				<a href="#" class="form-group__back" id="popup-back"></a>\n			</div>\n		</div>\n	</form>\n\n</div>'},useData:!0}),this.Templates.popup__forgot=Handlebars.template({1:function(f,e,h,g){return"disabled"},compiler:[6,">= 2.0.0-beta.1"],main:function(i,h,n,m){var l,k,j=this.escapeExpression;return'<div class="popup__content popup__content--narrow">\n	\n	<h2>Glemt passord</h2>\n\n	<p>Få tilsendt PIN-kode ved å skrive inn ditt mobilnummer og trykk send.</p>\n\n	<form action="" novalidate>\n\n		<div class="form-group">\n			<div class="form-group__field form-group__field--large form-group__field--collapsed">\n				<input type="tel" name="phone" id="phone" placeholder="Mobilnummer" value="'+j((k=null!=(k=h.phone||(null!=i?i.phone:i))?k:h.helperMissing,"function"==typeof k?k.call(i,{name:"phone",hash:{},data:m}):k))+'">\n			</div>\n			<div class="form-group__field form-group__field--small form-group__field--collapsed">\n				<button class="form-group__btn form-group__btn--next" id="send-pin" '+(null!=(l=h.unless.call(i,null!=i?i.phone:i,{name:"unless",hash:{},fn:this.program(1,m,0),inverse:this.noop,data:m}))?l:"")+'>Send</button>\n			</div>\n		</div>\n		<div class="form-group">\n			<div class="form-group__field">\n				<input type="text" name="pin" id="pin" pattern="\\d*" maxlength="4" placeholder="Pin" value="'+j(this.lambda(null!=(l=null!=i?i.pin:i)?l.pin:l,i))+'" readonly>\n			</div>\n		</div>\n		<div class="form-group">\n			<div class="form-group__field">\n				<input type="password" name="password" id="password" placeholder="Passord" '+(null!=(l=h.unless.call(i,null!=i?i.pin:i,{name:"unless",hash:{},fn:this.program(1,m,0),inverse:this.noop,data:m}))?l:"")+'>\n			</div>\n			<div class="form-group__field">\n				<input type="password" name="passwordrepeat" id="passwordrepeat" placeholder="Gjenta passord" '+(null!=(l=h.unless.call(i,null!=i?i.pin:i,{name:"unless",hash:{},fn:this.program(1,m,0),inverse:this.noop,data:m}))?l:"")+'>\n			</div>\n		</div>\n	\n		<hr>\n\n		<div class="form-group">\n			<div class="form-group__field">\n				<button class="form-group__btn form-group__btn--next" type="submit" disabled>Gå videre</button>\n				<a href="#" class="form-group__back" id="popup-back"></a>\n			</div>\n		</div>\n	</form>\n\n</div>'},useData:!0}),this.Templates.popup__login=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(f,e,h,g){return'<div class="popup__content popup__content--narrow">\n	\n	<h2>Velkommen</h2>\n\n	<div class="form-group">\n		<div class="form-group__field">\n			<button class="form-group__btn--block form-group__btn--facebook" id="fb-btn">Logg inn med Facebook</button>\n		</div>\n	</div>\n	<p class="divider">eller...</p>\n\n	<form action="" novalidate>\n		<div class="form-group">\n			<div class="form-group__field">\n				<input type="tel" name="phone" placeholder="Mobilnummer">\n			</div>\n			<div class="form-group__field">\n				<input type="password" name="password" placeholder="Passord">\n			</div>\n		</div>\n\n		<div class="form-group">\n			<button class="form-group__btn form-group__btn--next" type="submit">Logg inn</button>\n			<a class="form-group__btn form-group__btn--link" id="forgot-btn" href="#">Glemt passord</a>\n		</div>\n	</form>\n\n	<hr>\n\n	<div class="form-group">\n		<div class="form-group__field">\n			<a class="form-group__btn" id="create-btn" href="#">Opprett konto</a>\n		</div>\n	</div>\n\n</div>'},useData:!0}),this.Templates.popup__order=Handlebars.template({1:function(j,i,p,o){var n,m,l=this.lambda,k=this.escapeExpression;return'					<tr class="cart__row">\n						<td>\n							<img class="cart__image" src="'+k(l(null!=j?j.image:j,j))+'" alt="'+k(l(null!=j?j.name:j,j))+'">\n						</td>\n						<td>\n							<h3 class="cart__title">'+k(l(null!=j?j.name:j,j))+"</h3>\n"+(null!=(n=i["if"].call(j,null!=j?j.split:j,{name:"if",hash:{},fn:this.program(2,o,0),inverse:this.program(5,o,0),data:o}))?n:"")+'						</td>\n						<td class="cart__prices">\n							'+(null!=(n=i["if"].call(j,null!=j?j.discounted:j,{name:"if",hash:{},fn:this.program(7,o,0),inverse:this.noop,data:o}))?n:"")+"\n							<p>"+k((m=null!=(m=i.price||(null!=j?j.price:j))?m:i.helperMissing,"function"==typeof m?m.call(j,{name:"price",hash:{},data:o}):m))+" kr</p>\n						</td>\n					</tr>\n"},2:function(g,f,j,i){var h;return null!=(h=f.each.call(g,null!=g?g.parts:g,{name:"each",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?h:""},3:function(i,h,n,m){var l,k=this.lambda,j=this.escapeExpression;return"								<p><strong>"+j(k(null!=i?i.name:i,i))+":</strong> "+j(k(null!=(l=null!=i?i.description:i)?l.text:l,i))+"</p>\n"},5:function(g,f,j,i){var h;return"								<p>"+this.escapeExpression(this.lambda(null!=(h=null!=g?g.description:g)?h.text:h,g))+"</p>\n"},7:function(g,f,j,i){var h;return'<p class="cart__discounted">'+this.escapeExpression((h=null!=(h=f.discounted||(null!=g?g.discounted:g))?h:f.helperMissing,"function"==typeof h?h.call(g,{name:"discounted",hash:{},data:i}):h))+" kr</p>"},compiler:[6,">= 2.0.0-beta.1"],main:function(h,g,l,k){var j,i;return'<div class="popup__content">\n	\n	<h2>ID: '+this.escapeExpression((i=null!=(i=g.id||(null!=h?h.id:h))?i:g.helperMissing,"function"==typeof i?i.call(h,{name:"id",hash:{},data:k}):i))+'</h2>\n\n	<div class="info-group">\n		<div class="info-group__field">\n\n			<h4>Kundenavn</h4>\n			<p>Ola Normann</p>\n\n		</div><div class="info-group__field">\n\n			<h4>LEVERES VED</h4>\n			<p>Adresse Gaten 12, 4321, Stavanger</p>\n\n		</div><div class="info-group__field">\n\n			<h4>BETALINGSMÅTE</h4>\n			<p>Kontant</p>\n\n		</div><div class="info-group__field">\n\n			<h4>AVTALT TID</h4>\n			<p>Fredag 01.02.2015 - 22:05</p>\n\n		</div>\n	</div>\n\n	<div class="orders">\n		<h3>Ordren din</h3>\n		\n		<div class="table-container">\n			<table class="cart-table">\n				<tbody id="cart-content">\n					\n'+(null!=(j=g.each.call(h,null!=h?h.items:h,{name:"each",hash:{},fn:this.program(1,k,0),inverse:this.noop,data:k}))?j:"")+'\n				</tbody>\n			</table>\n		</div>\n\n		<div class="cart__summary">\n			<div class="form-group form-group--bordered cart__summary-prices">\n				<div class="form-group__field form-group__field--text">\n					<p>Totalt</p>\n					<p class="cart__amount"><span id="cart-amount">1450</span> kr</p>\n				</div>\n			</div>\n			<div class="form-group">\n				<div class="form-group__field">\n					<a href="#" class="form-group__btn form-group__btn--block form-group__btn--transparent">KANSLERER ORDRE</a>\n				</div>\n			</div>\n			<div class="form-group">\n				<div class="form-group__field">\n					<a href="#" class="form-group__btn form-group__btn--block form-group__btn--next">ENDRE ORDRE</a>\n				</div>\n			</div>\n		</div>\n\n	</div>\n\n</div>\n'},useData:!0}),this.Templates.popup__ordertype=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(i,h,n,m){var l,k=this.lambda,j=this.escapeExpression;return'<div class="popup__content popup__content--narrow">\n	\n	<h2>Bestillingsmåte</h2>\n\n	<form action="" novalidate>\n\n		<div class="list-menu" id="order-types">\n\n			<ul>\n				<li>\n					<a href="#" class="list-menu__link" data-expand="#ordertype-pickup" data-expand-onload data-collapse="#ordertype-deliver,#ordertype-hotel">Hente selv</a>\n\n					<div class="dropdown closed" id="ordertype-pickup">\n						<fieldset disabled>\n\n							<div id="restaurants-init-closest" class="hidden">\n								<p class="text-center">eller...</p>\n							</div>\n\n							<input type="hidden" name="type" value="TAKEAWAY">\n							<input type="hidden" name="restaurant" value="">\n\n							<div class="form-group">\n								<div class="form-group__field">\n									<input type="text" name="position" placeholder="Sted/Postnr.">\n								</div>\n							</div>\n						</fieldset>\n					</div>\n				</li>\n				<li>\n					<a href="#" class="list-menu__link" data-expand="#ordertype-deliver" data-collapse="#ordertype-pickup,#ordertype-hotel">Levering</a>\n\n					<div class="dropdown closed" id="ordertype-deliver">\n						<fieldset disabled>\n							<input type="hidden" name="type" value="DELIVERY">\n							<input type="hidden" name="confirmed" value="false">\n\n							<div class="form-group">\n								<div class="form-group__field">\n									<select name="addressType" id="stored-address" data-select-open>\n										<option value="HOME" data-select-open-target="#home-address-container">Hjem</option>\n										<option value="WORK" data-select-open-target="#work-address-container">Arbeid</option>\n										<option value="OTHER" data-select-open-target="#other-address-container">Annen</option>\n									</select>\n								</div>\n							</div>\n\n							<div id="home-address-container">\n								<div class="form-group">\n									<div class="form-group__field">\n										<input type="text" id="home-address" name="addresses[home][address]" placeholder="Gate" autocomplete="off" data-address-dropdown="#home-address-dropdown" value="'+j(k(null!=(l=null!=(l=null!=i?i.addresses:i)?l.home:l)?l.address:l,i))+'">\n									</div>\n								</div>\n\n								<div class="form-group__dropdown" id="home-address-dropdown"></div>\n\n								<div class="form-group">\n									<div class="form-group__field form-group__field--small">\n										<input type="text" name="addresses[home][postCode]" placeholder="P.nr." value="'+j(k(null!=(l=null!=(l=null!=i?i.addresses:i)?l.home:l)?l.post_code:l,i))+'">\n									</div>\n									<div class="form-group__field form-group__field--large">\n										<input type="text" name="addresses[home][postOffice]" placeholder="Sted" value="'+j(k(null!=(l=null!=(l=null!=i?i.addresses:i)?l.home:l)?l.post_office:l,i))+'">\n									</div>\n								</div>\n\n								<div class="form-group">\n									<div class="form-group__field">\n										<input type="text" name="addresses[home][directions]" placeholder="Veibeskrivelse" value="'+j(k(null!=(l=null!=(l=null!=i?i.addresses:i)?l.home:l)?l.directions:l,i))+'">\n									</div>\n								</div>\n							</div>\n\n							<div id="work-address-container">\n								<div class="form-group">\n									<div class="form-group__field">\n										<input type="text" id="work-address" name="addresses[work][address]" placeholder="Gate" autocomplete="off" data-address-dropdown="#work-address-dropdown" value="'+j(k(null!=(l=null!=(l=null!=i?i.addresses:i)?l.work:l)?l.address:l,i))+'">\n									</div>\n								</div>\n\n								<div class="form-group__dropdown" id="work-address-dropdown"></div>\n\n								<div class="form-group">\n									<div class="form-group__field form-group__field--small">\n										<input type="text" name="addresses[work][postCode]" placeholder="P.nr." value="'+j(k(null!=(l=null!=(l=null!=i?i.addresses:i)?l.work:l)?l.post_code:l,i))+'">\n									</div>\n									<div class="form-group__field form-group__field--large">\n										<input type="text" name="addresses[work][postOffice]" placeholder="Sted" value="'+j(k(null!=(l=null!=(l=null!=i?i.addresses:i)?l.work:l)?l.post_office:l,i))+'">\n									</div>\n								</div>\n\n								<div class="form-group">\n									<div class="form-group__field">\n										<input type="text" name="addresses[work][directions]" placeholder="Veibeskrivelse" value="'+j(k(null!=(l=null!=(l=null!=i?i.addresses:i)?l.work:l)?l.directions:l,i))+'">\n									</div>\n								</div>\n							</div>\n\n							<div id="other-address-container">\n								<div class="form-group">\n									<div class="form-group__field">\n										<input type="text" id="other-address" name="addresses[other][address]" placeholder="Gate" autocomplete="off" data-address-dropdown="#other-address-dropdown" value="'+j(k(null!=(l=null!=(l=null!=i?i.addresses:i)?l.other:l)?l.address:l,i))+'">\n									</div>\n								</div>\n\n								<div class="form-group__dropdown" id="other-address-dropdown"></div>\n\n								<div class="form-group">\n									<div class="form-group__field form-group__field--small">\n										<input type="text" name="addresses[other][postCode]" placeholder="P.nr." value="'+j(k(null!=(l=null!=(l=null!=i?i.addresses:i)?l.other:l)?l.post_code:l,i))+'">\n									</div>\n									<div class="form-group__field form-group__field--large">\n										<input type="text" name="addresses[other][postOffice]" placeholder="Sted" value="'+j(k(null!=(l=null!=(l=null!=i?i.addresses:i)?l.other:l)?l.post_office:l,i))+'">\n									</div>\n								</div>\n\n								<div class="form-group">\n									<div class="form-group__field">\n										<input type="text" name="addresses[other][directions]" placeholder="Veibeskrivelse" value="'+j(k(null!=(l=null!=(l=null!=i?i.addresses:i)?l.other:l)?l.directions:l,i))+'">\n									</div>\n								</div>\n							</div>\n\n						</fieldset>\n					</div>\n				</li>\n				<li>\n					<a href="#" class="list-menu__link" data-expand="#ordertype-hotel" data-collapse="#ordertype-deliver,#ordertype-pickup">Hotell</a>\n\n					<div class="dropdown closed" id="ordertype-hotel">\n						<fieldset disabled>\n\n							<input type="hidden" name="type" value="HOTEL">\n\n							<div class="form-group">\n								<div class="form-group__field">\n									<input type="text" name="hotel" placeholder="Hotellnummer">\n								</div>\n							</div>\n\n							<div class="form-group">\n								<div class="form-group__field">\n									<input type="text" name="room" placeholder="Romnummer">\n								</div>\n							</div>\n							\n						</fieldset>\n					</div>\n				</li>\n			</ul>\n\n		</div>\n\n		<div class="form-group">\n			<div class="form-group__field">\n				<button class="form-group__btn form-group__btn--next" type="submit">Gå videre</button>\n			</div>\n		</div>\n\n	</form>\n\n</div>'},useData:!0}),this.Templates.popup__product=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(r,q,p,o){var n,m,l=q.helperMissing,k="function",j=this.escapeExpression;return'<div class="popup__content popup__content--full">\n\n	<div class="product">\n\n		<img id="product-image" src="'+j((m=null!=(m=q.image||(null!=r?r.image:r))?m:l,typeof m===k?m.call(r,{name:"image",hash:{},data:o}):m))+'" alt="'+j((m=null!=(m=q.name||(null!=r?r.name:r))?m:l,typeof m===k?m.call(r,{name:"name",hash:{},data:o}):m))+'" class="product__image">\n\n		<div class="product__content">\n			<form action="" novalidate>\n\n				<h2 id="product-name">'+j((m=null!=(m=q.name||(null!=r?r.name:r))?m:l,typeof m===k?m.call(r,{name:"name",hash:{},data:o}):m))+'</h2>\n\n				<div class="form-group">\n					<div class="form-group__field">\n						<label class="form-group__label" for="variants">TYPE / STØRRELSE</label>\n						<select name="selected_variant_id" id="variants" data-disable-custom></select>\n					</div>\n				</div>\n\n				<div class="form-group">\n					<div class="form-group__field form-group__field--small">\n						<label class="form-group__label" for="quantity">Antall</label>\n						<input type="number" min="1" name="quantity" id="quantity" placeholder="Antall" value="1">\n					</div>\n\n					<div class="form-group__field form-group__field--large">\n						<label class="form-group__label" for="cooking">STEKING</label>\n						<select name="cooking" id="cooking"></select>\n					</div>\n				</div>\n\n				<div class="form-group">\n					<h4>Beskrivelse</h4>\n					'+(null!=(m=null!=(m=q.description_long||(null!=r?r.description_long:r))?m:l,n=typeof m===k?m.call(r,{name:"description_long",hash:{},data:o}):m)?n:"")+'\n				</div>\n\n				<div class="form-group form-group--bottom">\n					<div class="form-group__field form-group__field--half">\n						<a id="customize-btn" class="form-group__btn hidden" href="'+j((m=null!=(m=q.url||(null!=r?r.url:r))?m:l,typeof m===k?m.call(r,{name:"url",hash:{},data:o}):m))+'">Tilpass</a>\n					</div>\n					<div class="form-group__field form-group__field--half">\n						<button id="add-to-cart-btn" class="form-group__btn form-group__btn--next" type="submit">Legg til (<span id="product-amount">'+j((m=null!=(m=q.price||(null!=r?r.price:r))?m:l,typeof m===k?m.call(r,{name:"price",hash:{},data:o}):m))+"</span> kr)</button>\n					</div>\n				</div>\n\n			</form>\n		</div>\n		\n	</div>\n\n</div>"},useData:!0}),this.Templates.popup__register=Handlebars.template({1:function(f,e,h,g){return"disabled"},3:function(g,f,j,i){var h;return'			<div class="form-group__field">\n				<input type="password" name="password" id="password" placeholder="Passord" '+(null!=(h=f.unless.call(g,null!=g?g.pin:g,{name:"unless",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?h:"")+'>\n			</div>\n			<div class="form-group__field">\n				<input type="password" name="passwordrepeat" id="passwordrepeat" placeholder="Gjenta passord" '+(null!=(h=f.unless.call(g,null!=g?g.pin:g,{name:"unless",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?h:"")+">\n			</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(r,q,p,o){var n,m,l=q.helperMissing,k="function",j=this.escapeExpression;return'<div class="popup__content popup__content--narrow">\n	\n	<h2>Opprett konto</h2>\n\n	<p>Få tilsendt PIN-kode ved å skrive inn ditt mobilnummer og trykk send.</p>\n\n	<form action="" novalidate>\n\n		<div class="form-group">\n			<div class="form-group__field form-group__field--large form-group__field--collapsed">\n				<input type="tel" name="phone" id="phone" placeholder="Mobilnummer" value="'+j((m=null!=(m=q.phone||(null!=r?r.phone:r))?m:l,typeof m===k?m.call(r,{name:"phone",hash:{},data:o}):m))+'">\n			</div>\n			<div class="form-group__field form-group__field--small form-group__field--collapsed">\n				<button class="form-group__btn form-group__btn--next" id="send-pin" '+(null!=(n=q.unless.call(r,null!=r?r.phone:r,{name:"unless",hash:{},fn:this.program(1,o,0),inverse:this.noop,data:o}))?n:"")+'>Send</button>\n			</div>\n		</div>\n		<div class="form-group">\n			<div class="form-group__field">\n				<input type="text" name="pin" id="pin" pattern="\\d*" maxlength="4" placeholder="Pin" value="'+j(this.lambda(null!=(n=null!=r?r.pin:r)?n.pin:n,r))+'" readonly>\n			</div>\n		</div>\n		<div class="form-group">\n			<div class="form-group__field form-group__field--half">\n				<input type="text" name="firstName" id="firstname" placeholder="Fornavn" value="'+j((m=null!=(m=q.firstName||(null!=r?r.firstName:r))?m:l,typeof m===k?m.call(r,{name:"firstName",hash:{},data:o}):m))+'" '+(null!=(n=q.unless.call(r,null!=r?r.pin:r,{name:"unless",hash:{},fn:this.program(1,o,0),inverse:this.noop,data:o}))?n:"")+'>\n			</div>\n			<div class="form-group__field form-group__field--half">\n				<input type="text" name="lastName" id="lastname" placeholder="Etternavn" value="'+j((m=null!=(m=q.lastName||(null!=r?r.lastName:r))?m:l,typeof m===k?m.call(r,{name:"lastName",hash:{},data:o}):m))+'" '+(null!=(n=q.unless.call(r,null!=r?r.pin:r,{name:"unless",hash:{},fn:this.program(1,o,0),inverse:this.noop,data:o}))?n:"")+'>\n			</div>\n		</div>\n		<div class="form-group">\n			<div class="form-group__field">\n				<input type="email" name="email" id="email" placeholder="E-post" value="'+j((m=null!=(m=q.email||(null!=r?r.email:r))?m:l,typeof m===k?m.call(r,{name:"email",hash:{},data:o}):m))+'"  value="'+j((m=null!=(m=q.email||(null!=r?r.email:r))?m:l,typeof m===k?m.call(r,{name:"email",hash:{},data:o}):m))+'" '+(null!=(n=q.unless.call(r,null!=r?r.pin:r,{name:"unless",hash:{},fn:this.program(1,o,0),inverse:this.noop,data:o}))?n:"")+">\n			</div>\n\n"+(null!=(n=q.unless.call(r,null!=r?r.facebook:r,{name:"unless",hash:{},fn:this.program(3,o,0),inverse:this.noop,data:o}))?n:"")+'		</div>\n	\n		<hr>\n\n		<div class="form-group">\n			<div class="form-group__field">\n				<button class="form-group__btn form-group__btn--next" type="submit" '+(null!=(n=q.unless.call(r,null!=r?r.pin:r,{name:"unless",hash:{},fn:this.program(1,o,0),inverse:this.noop,data:o}))?n:"")+'>Gå videre</button>\n				<a href="#" class="form-group__back" id="popup-back"></a>\n			</div>\n		</div>\n	</form>\n\n</div>'},useData:!0}),this.Templates.popup__takeaway=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(f,e,h,g){return'<div class="popup__content popup__content--narrow restaurant-list">\n	\n	<h2>Hente selv</h2>\n\n	<form action="" novalidate>\n\n		<input type="hidden" name="restaurant" value="">\n\n		<ul id="restaurants-closest" class="restaurant-list"></ul>\n		<div id="restaurants-rest" class="hidden">\n            <a href="#" class="restaurant-list__toggle" data-expand="#restaurants-rest-content">Se flere restauranter</a>\n            <ul class="dropdown closed" id="restaurants-rest-content"></ul>\n		</div>\n	\n		<hr>\n\n		<div class="form-group">\n			<div class="form-group__field">\n				<button class="form-group__btn form-group__btn--next" type="submit">Gå videre</button>\n				<a href="#" class="form-group__back" id="popup-back"></a>\n			</div>\n		</div>\n	</form>\n\n</div>'},useData:!0}),function a(h,m,l){function k(f,e){if(!m[f]){if(!h[f]){var d="function"==typeof require&&require;if(!e&&d){return d(f,!0)}if(j){return j(f,!0)}var c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c}var b=m[f]={exports:{}};h[f][0].call(b.exports,function(g){var n=h[f][1][g];return k(n?n:g)},b,b.exports,a,h,m,l)}return m[f].exports}for(var j="function"==typeof require&&require,i=0;i<l.length;i++){k(l[i])}return k}({1:[function(g,f,j){var i=g("./basecollection.js"),h=g("../models/base.js");f.exports=i.extend({query:"",model:h,url:function(){var b=this;return window.API_PATH_ADDRESS_SEARCH+"?query="+b.query}})},{"../models/base.js":44,"./basecollection.js":2}],2:[function(e,d,f){d.exports=Backbone.Collection.extend({parse:function(b){return !b.error&&b.data?b.data:b},injectUrl:function(h,g){for(var i in g){h=h.replace("{"+i+"}",g[i])}return h}})},{}],3:[function(f,e,h){var g=f("../models/ingredient.js");e.exports=Backbone.Collection.extend({model:g,initialize:function(){}})},{"../models/ingredient.js":45}],4:[function(g,f,j){var i=g("./basecollection.js"),h=g("../models/product.js");f.exports=i.extend({id:null,model:h,url:function(){var b=this;return b.injectUrl(window.API_PATH_SPLITTABLE,{variantId:b.id})}})},{"../models/product.js":50,"./basecollection.js":2}],5:[function(f,e,h){var g=f("../models/product_variant.js");e.exports=Backbone.Collection.extend({model:g,initialize:function(){}})},{"../models/product_variant.js":51}],6:[function(g,f,j){var i=g("./basecollection.js"),h=g("../models/restaurant.js");f.exports=i.extend({query:null,lat:null,"long":null,model:h,url:function(){var d=this,c="";return d.query?c="?query="+d.query:d.lat&&d["long"]&&(c="?lat="+d.lat+"&long="+d["long"]),window.API_PATH_RESTAURANT_SEARCH+c},findByString:function(e,d){var k=this;k.lat=null,k["long"]=null,"string"==typeof e&&""!==e&&(k.query=e),k.fetch({success:function(){"function"==typeof d&&d()}})},findByPosition:function(k,e,m){var l=this;l.query=null,l.lat=k,l["long"]=e,l.fetch({success:function(){"function"==typeof m&&m()}})}})},{"../models/restaurant.js":52,"./basecollection.js":2}],7:[function(g,f,j){var i=g("../collections/addresscollection.js"),h=g("../controllers/addressfinder_item.js");f.exports=Backbone.View.extend({$input:null,$target:null,addresses:null,addressArr:null,typeTimeout:null,initialize:function(d){var c=this;c.addresses=new i,c.addresses.on("sync",function(){c.renderAddresses()}),c.$input=d.input},open:function(){var b=this;b.$target=b.$input.closest("form").find(b.$input.data("address-dropdown")),b.$input.off("input focus blur").on("input",b.writingAddress.bind(b)).on("focus",b.openDropdown.bind(b)).on("blur",b.closeDropdown.bind(b)),b.renderAddresses(),b.closeDropdown()},close:function(){var d=this;for(var c in d.addressArr){d.addressArr[c].off("CLICKED_ADDRESS").remove()}return d.addressArr=[],!1},renderAddresses:function(){var b=this;b.close(),b.$target.html(""),b.addresses.each(function(d){var e=new h({model:d});e.on("CLICKED_ADDRESS",function(){b.model=this.model,b.trigger("ADDRESS_CHOSEN",b.model)}),b.addressArr.push(e),b.$target.append(e.render().el)})},writingAddress:function(){var d=this,c=d.$input.val();return c.length>2?(d.typeTimeout&&clearTimeout(d.typeTimeout),d.typeTimeout=setTimeout(function(){d.addresses.query=c,d.addresses.fetch()},200)):d.close(),!1},openDropdown:function(){var b=this;b.$target.show()},closeDropdown:function(){var b=this;setTimeout(function(){b.$target.hide()},200)}})},{"../collections/addresscollection.js":1,"../controllers/addressfinder_item.js":8}],8:[function(e,d,f){d.exports=Backbone.View.extend({template:Templates["form__addressfinder-item"],model:null,events:{"click a":"clickedAddress"},render:function(){var b=this;return b.$el.html(b.template(b.model.toJSON())),b},clickedAddress:function(){var b=this;return b.trigger("CLICKED_ADDRESS",b.model.toJSON()),!1}})},{}],9:[function(h,g,l){var k=h("./cart_base.js"),j=h("./cart_item.js"),i=h("../models/product.js");g.exports=k.extend({el:"#cart",itemClass:j,itemHolder:"#cart-content",amountText:"#cart-amount",upsale:null,items:{},events:function(){var b=k.prototype.events;return _.isFunction(b)&&(b=b()),_.extend({},b,{"click [data-product-link]":"addUpsaleProduct"})},initialize:function(d){var c=this;c.order=d.order,c.order.on("ORDER_UPDATED",function(){c.run()}),c.initUpsaleProduct()},run:function(){var b=this;b.$el.length&&b.initContent()},initUpsaleProduct:function(){var b=this;b.upsale=new i,b.upsale.on("ORDER_UPDATED",function(e){var m=b.upsale.get("selected_variant_id"),f=$('.cart__offer-item:has([data-product-link="'+m+'"])');f.remove(),b.order.items.trigger("ORDER_UPDATED",e)})},addUpsaleProduct:function(e){var d=this,f=$(e.currentTarget);return d.upsale.clear().set("selected_variant_id",f.data("product-link")).save(),!1}})},{"../models/product.js":50,"./cart_base.js":10,"./cart_item.js":11}],10:[function(e,d,f){d.exports=Backbone.View.extend({events:{"submit form":"submitForm"},order:null,items:{},initContent:function(){var b=this;b.removeContent(),b.order.items.each(function(g){var i=g.get("id"),h=b.items[i];h||(h=new b.itemClass({model:g}),h.on("REMOVE_ITEM",function(){var c=this.model.get("id");this.destroy(),delete b.items[c]}),b.items[i]=h),b.$(b.itemHolder).append(h.render().el)}),b.order.on("change:amount",function(){b.setAmount()}),b.setAmount()},removeContent:function(){var h=this;for(var g in h.items){var i=h.items[g];i.remove()}},setAmount:function(){var g=this,c=g.order.get("amount");c||(c=0),g.$(g.amountText).html(c)},submitForm:function(){}})},{}],11:[function(f,e,h){var g=f("./cart_item_base.js");e.exports=g.extend({tagName:"tr",template:Templates.cart__row,className:"cart__row"})},{"./cart_item_base.js":12}],12:[function(e,d,f){d.exports=Backbone.View.extend({events:{"input .quantity-picker__input":"updateQuantity","click .quantity-picker__controller--remove":"removeItem"},initialize:function(){var b=this;b.model.on("change",function(){b.render()})},render:function(){var b=this;return b.$el.html(b.template(b.model.toJSON())),b.delegateEvents(),General.initialize(b.$el),b},updateQuantity:function(){var g=this,c=parseInt(g.$(".quantity-picker__input").val());g.model.set("quantity",c)},removeItem:function(h){var g=this,j=$(h.currentTarget),i=confirm(j.data("alert"));return i&&g.trigger("REMOVE_ITEM"),!1},destroy:function(){var b=this;b.model.destroy({success:function(){b.remove()},error:function(){console.log("error deleting")}})}})},{}],13:[function(i,h,n){var m=i("../models/product.js"),l=i("../collections/productcollection.js"),k=i("./product_base.js"),j=i("./customize_product.js");h.exports=k.extend({el:"#product",single:null,parts:[],splittable:null,infoTemplate:Templates.customize__productinfo,thumbTemplate:Templates.customize__productthumb,events:function(){var b=k.prototype.events;return _.isFunction(b)&&(b=b()),_.extend({},b,{"click #split-pizza-btn":"prepareSplit"})},initialize:function(d){var c=this;k.prototype.initialize.call(c,d),c.$el.length&&c.initProduct()},initProduct:function(){var b=this;b.model=new m(b.$("form").serializeObject()),b.model.on("sync",function(){var c=b.model.get("extension");c?b.initSplit([new m(b.model.get("base")),new m(c)]):b.initSingle()}).on("change:variants",function(){b.rewriteVariants(),General.initialize(b.$("#variants"))}).on("change:price change:amount",function(){b.setAmount()}),b.model.fetch(),b.splittable=new l,b.splittable.on("sync",function(){b.renderSplittable()})},initSingle:function(){var b=this;b.single=new j({product:b.model.clone(),container:b.$(".product__custom .product-controller--part1 ul")}),b.single.product.removeUncustomizableVariants(),b.single.product.on("change:variants",function(){b.updateSinglePrice(),b.rewriteInfo()}).on("change:variant",function(){b.updateSingleModel()}),b.updateSingleModel(),b.rewriteInfo()},resetSingle:function(){var b=this;b.single.product.off("change:amount"),b.model.selectedVariant.off("change:ingredients"),b.model.selectedVariant=null},prepareSplit:function(){var b=this;return b.splittable.id=b.single.product.get("os_product_id"),b.splittable.fetch(),!1},renderSplittable:function(){var b=this;console.log("rendering splittable",b.splittable),b.$("#product-thumbs [data-product-id]").off("click"),b.$("#product-thumbs").html(""),b.splittable.each(function(d){var e=b.thumbTemplate(d.toJSON());b.$("#product-thumbs").append(e)}),b.$("#split-pizza-btn").attr("disabled","disabled"),b.$("#product-thumbs").addClass("open"),General.initialize(b.$("#product-thumbs")),b.$("#product-thumbs [data-product-id]").on("click",function(c){return b.splitPizza($(c.currentTarget).data("product-id")),!1})},splitPizza:function(d){var c=this;return c.$("#product-thumbs, #split-pizza").removeClass("open"),c.$("#splitted-pizza").addClass("open"),c.splitModel(d),!1},splitModel:function(e){var d=this,f=new m({productID:e,type:d.model.get("type")});f.once("PRODUCT_LOADED",function(){var b=[d.single.product.clone(),f];d.initSplit(b)}).fetch()},initSplit:function(f){var e=this;e.resetSingle(),e.model.set({id:null,variants:null,selected_variant_id:null,name:"Pizza delt i 2"},{silent:!0});var o=new j({product:f[0],container:e.$(".product__custom .product-controller--part1 ul")}),g=new j({product:f[1],container:e.$(".product__custom .product-controller--part2 ul")});o.product.removeUnsplittableVariants(),o.product.removeUncustomizableVariants(),g.product.removeUnsplittableVariants(),g.product.removeUncustomizableVariants(),e.parts.push(o),e.parts.push(g),o.product.on("change:variants",function(){e.updateSplitPrice(),e.rewriteInfo()}).set("quantity",1).on("change:variant",function(){e.updateSplitModel(),e.rewriteInfo()}),g.product.on("change:variants",function(){console.log("split pizza part2 price changed",g.product.selectedVariant.get("totalPrice")),e.updateSplitPrice()}).set("quantity",1).on("change:variant",function(){e.updateSplitModel()}),e.rewriteVariants(),e.$("#variants, #variants option").attr("disabled","disabled").trigger("change"),e.updateSplitModel(),e.updateSplitPrice(),e.rewriteInfo(),General.initialize(e.$("#variants"))},updateSingleModel:function(){var b=this;b.model.set("base",b.single.product.toJSON())},updateSplitModel:function(){var b=this;b.model.set("base",b.parts[0].product.toJSON()),b.model.set("extension",b.parts[1].product.toJSON())},updateSinglePrice:function(){var b=this;b.model.set("price",b.single.product.selectedVariant.get("totalPrice"))},updateSplitPrice:function(){var p,o=this,u=o.parts[0].product.get("price"),t=o.parts[1].product.get("price");p=u>t?u:t;var s={basics:{},extras:{}};s=o.checkSplitIngredients(o.parts[0].product.selectedVariant.ingredients,s),s=o.checkSplitIngredients(o.parts[1].product.selectedVariant.ingredients,s);for(var r in s.basics){p+=s.basics[r]}for(var q in s.extras){p+=s.extras[q]}o.model.set("price",p)},checkAddedIngredients:function(d){var c={basics:{},extras:{}};return d.each(function(b){var s=b.get("os_product_id"),r=b.get("price"),q=b.get("extraModel");if(b.get("included")&&0!==r&&(c.basics[s]=r),q){var p=q.get("os_product_id"),o=q.get("price");q.get("included")&&0!==o&&(c.extras[p]=o)}}),c},sortSubArr:function(d,c){return d.sort(function(b,e){return b[c]-e[c]}),d},sortObjectToArr:function(f){var e=this,o=[];for(var g in f){o.push([g,f[g]])}return o=e.sortSubArr(o,1)},checkIngredientsArr:function(e,d){for(var f in d){if(e[0]===d[f][0]){return f}}return !1},getIngredientsAddonsObjects:function(p,o){var u,t=this,s=[],r=t.sortObjectToArr(p.basic),q=t.sortObjectToArr(p.extras);for(u in r){r[u].extra=!1,s.push(r[u])}for(u in q){r[u].extra=!0,s.push(q[u])}console.log(s,o)},checkPayableIngredients:function(w){var v,u,t=this,s={basics:[],extras:[]},r={basics:[],extras:[]},q={basics:[],extras:[]},p={basics:[],extras:[]};console.log("getIngredientsAddonsObjects - baseIngredients",t.getIngredientsAddonsObjects(w.baseIngredients,w.baseNumFree)),console.log("getIngredientsAddonsObjects - extensionIngredients",t.getIngredientsAddonsObjects(w.extensionIngredients,w.extensionNumFree)),u=t.sortObjectToArr(w.baseIngredients.basics);for(v in u){w.baseNumFree&&r.basics.length+r.extras.length<w.baseNumFree?r.basics.push(u[v]):s.basics.push(u[v])}u=t.sortObjectToArr(w.baseIngredients.extras);for(v in u){w.baseNumFree&&r.basics.length+r.extras.length<w.baseNumFree?r.extras.push(u[v]):s.extras.push(u[v])}u=t.sortObjectToArr(w.extensionIngredients.basics);for(v in u){w.extensionNumFree&&p.basics.length+p.extras.length<w.extensionNumFree?p.basics.push(u[v]):q.basics.push(u[v])}u=t.sortObjectToArr(w.extensionIngredients.extras);for(v in u){w.extensionNumFree&&p.basics.length+p.extras.length<w.extensionNumFree?p.extras.push(u[v]):q.extras.push(u[v])}var o;for(v in s.basics){o=t.checkIngredientsArr(s.basics[v],q.basics),o!==!1?console.log("baseAddon.basics ("+s.basics[v][0]+") found in extensionAddons.basics["+o+"]"):w.baseNumFree&&(o=t.checkIngredientsArr(s.basics[v],p.basics),o!==!1&&console.log("baseAddon.basics ("+s.basics[v][0]+") found in extensionFree.basics["+o+"]"))}for(v in s.extras){o=t.checkIngredientsArr(s.extras[v],q.extras),o!==!1?console.log("baseAddon.extras ("+s.extras[v][0]+") found in extensionAddons.extras["+o+"]"):w.baseNumFree&&(o=t.checkIngredientsArr(s.extras[v],p.extras),o!==!1&&console.log("baseAddon.extras ("+s.extras[v][0]+") found in extensionFree.extras["+o+"]"))}for(v in q.basics){o=t.checkIngredientsArr(q.basics[v],s.basics),o!==!1?console.log("extensionAddons.basics ("+q.basics[v][0]+") found in baseAddons.basics["+o+"]"):w.extensionNumFree&&(o=t.checkIngredientsArr(q.basics[v],r.basics),o!==!1&&console.log("extensionAddons.basics ("+q.basics[v][0]+") found in baseFree.basics["+o+"]"))}for(v in q.extras){o=t.checkIngredientsArr(q.extras[v],s.extras),o!==!1?console.log("extensionAddons.extras ("+q.extras[v][0]+") found in baseAddons.extras["+o+"]"):w.extensionNumFree&&(o=t.checkIngredientsArr(q.extras[v],r.extras),o!==!1&&console.log("extensionAddons.extras ("+q.extras[v][0]+") found in baseFree.extras["+o+"]"))}return{baseAddons:s,baseFree:r,extensionAddons:q,extensionFree:p}},checkSplitIngredients:function(d,c){return d.each(function(b){var s=b.get("os_product_id"),r=b.get("price"),q=b.get("extraModel");if(!c.basics[s]&&b.get("included")&&0!==r&&(c.basics[s]=r),q){var p=q.get("os_product_id"),o=q.get("price");!c.extras[p]&&q.get("included")&&0!==o&&(c.extras[p]=o)}}),c}})},{"../collections/productcollection.js":4,"../models/product.js":50,"./customize_product.js":15,"./product_base.js":36}],14:[function(e,d,f){d.exports=Backbone.View.extend({ingredient:null,template:Templates.customize__ingredient,events:{"change input":"updateIngredient"},initialize:function(g){var c=this;c.ingredient=g.ingredient},render:function(){var g=this,c=g.ingredient.toJSON();return c.cid=g.cid,g.$el.html(g.template(c)),g},updateIngredient:function(h){var g=this,k=$(h.currentTarget),j=k.is(":checked");if(k.data("ingredient-parent")){var i=g.ingredient.get("extraModel");i.set({included:j})}else{g.ingredient.set("included",j)}}})},{}],15:[function(g,f,j){var i=g("./customize_ingredient.js"),h=g("../models/ingredient.js");f.exports=Backbone.View.extend({product:null,template:Templates.customize__category,initialize:function(d){var c=this;c.product=d.product,c.container=d.container,c.product.on("PRODUCT_LOADED",function(){c.writeIngredients()}),c.writeIngredients()},writeIngredients:function(){var z=this,y=z.product.get("selected_variant_id"),x=z.product.variants.get(y),w=x.get("ingredients"),v=this.container.find('[id^="dropdown"].is-open');this.container.html("");for(var u in w.categories){var t=w.categories[u];t.cid=z.cid,t.dropdownId="dropdown"+t.os_category_id,t.open=v.is("#"+t.dropdownId);var s=$(z.template(t));this.container.append(s);for(var r,q=t.list.length,p=0;q-1>=p;p++){p%Math.ceil(q/4)===0&&(r=$('<div class="product__custom-column">').appendTo(s.find(".dropdown")));var e=x.ingredients.get(t.list[p][h.prototype.idAttribute]),d=new i({ingredient:e});r.append(d.render().el)}}General.initialize(z.container)}})},{"../models/ingredient.js":45,"./customize_ingredient.js":14}],16:[function(e,d,f){d.exports=Backbone.View.extend({loaded:!1,appId:window.FB_APP_ID,apiVersion:window.FB_API_VERSION,load:function(g){var c=this;window.fbAsyncInit=function(){FB.init({appId:c.appId,xfbml:!0,version:c.apiVersion}),FB.getLoginStatus(function(h){console.log("facebook response",h),"function"==typeof g&&g("connected"===h.status?h.authResponse:!1)}),c.loaded=!0},function(i,h,l){var k,j=i.getElementsByTagName(h)[0];i.getElementById(l)||(k=i.createElement(h),k.id=l,k.src="//connect.facebook.net/nb_NO/sdk.js",j.parentNode.insertBefore(k,j))}(document,"script","facebook-jssdk")},logIn:function(g){var c=this;c.loaded?FB.login(function(h){"function"==typeof g&&g(h?h.authResponse:!1)},{scope:"public_profile,email"}):"function"==typeof g&&g(!1)},loadInfo:function(b){FB.api("/me",function(c){b(c)})}})},{}],17:[function(e,d,f){d.exports=Backbone.View.extend({user:null,$subheader:null,$subheaderList:null,$subDropdown:null,$subDropdownList:null,initialize:function(g){var c=this;c.user=g.user,c.initMyPageLink(),c.$subheader=$("#subheader"),c.$subheader.length&&c.initSubheader()},initMyPageLink:function(){var b=this;$("#my-page").click(function(){return b.trigger("OPEN_MYPAGE",$(this).attr("href")),!1})},initSubheader:function(){var b=this;b.$subDropdown=b.$subheader.find("#subheader-dropdown"),b.$subheaderList=b.$subheader.find("#subheader-list"),b.$subDropdownList=b.$subheader.find("#subheader-dropdown-list"),$(window).resize(function(){b.resetSubheaderElements()}),b.resetSubheaderElements()},resetSubheaderElements:function(){var i=this;i.$subDropdown.before(i.$subDropdownList.children("li")).addClass("active");var h=i.$subheaderList.width()-i.$subDropdown.children("a:first").width();i.$subDropdown.removeClass("active");for(var n=i.$subheaderList.children(":not(.subheader-dropdown)").get(),m=n.length-1;m>=0;m--){var l=$(n[m]),k=l.position(),j=k.left+l.width();if(!(j>h)){break}i.$subDropdownList.prepend(l),i.$subDropdown.addClass("active")}}})},{}],18:[function(e,d,f){d.exports=Backbone.View.extend({el:"#product-thumbs",initialize:function(){var b=this;b.$el.length&&b.initProducts()},initProducts:function(){var b=this;b.$("[data-product-link]").click(function(){return b.openProduct(parseInt($(this).data("product-link"))),!1})},openProduct:function(g){var c=this;c.trigger("OPEN_PRODUCT",g)}})},{}],19:[function(f,e,h){var g=f("../models/order.js");e.exports=Backbone.View.extend({$orderList:null,order:null,initialize:function(){var b=this;b.$orderList=$("#order-list"),b.order=new g,b.$orderList.length&&b.initOrderList()},initOrderList:function(){var b=this;b.$orderList.find(".order-list__edit").click(function(){return b.openOrderPopup($(this).data("order-id")),!1})},openOrderPopup:function(d){var c=this;c.order.off("ORDER_UPDATED").clear().set("id",d).on("ORDER_UPDATED",function(){c.trigger("OPEN_ORDER",c.order)}).fetch()}})},{"../models/order.js":46}],20:[function(f,e,h){var g=f("./addressfinder.js");e.exports=Backbone.View.extend({el:"#my-profile",user:null,initialize:function(d){var c=this;c.user=d.user,c.$el.length&&c.initMyProfile()},initMyProfile:function(){var b=this;b.initAddressFinders()},initAddressFinders:function(){var b=this;b.homeAddressFinder=new g({input:b.$('[name="addresses[home][address]"]')}),b.homeAddressFinder.on("ADDRESS_CHOSEN",function(c){b.$("#home_streetname").val(c.get("address")),b.$('#home_zip"]').val(c.get("postCode")),b.$("#home_city").val(c.get("postOffice")),b.$("#home_directions").focus()}).open(),b.workAddressFinder=new g({input:b.$('[name="addresses[work][address]"]')}),b.workAddressFinder.on("ADDRESS_CHOSEN",function(c){b.$("#work_streetname").val(c.get("address")),b.$('#work_zip"]').val(c.get("postCode")),b.$("#work_city").val(c.get("postOffice")),b.$("#work_directions").focus()}).open(),b.otherAddressFinder=new g({input:b.$('[name="addresses[other][address]"]')}),b.otherAddressFinder.on("ADDRESS_CHOSEN",function(c){b.$("#other_streetname").val(c.get("address")),b.$('#other_zip"]').val(c.get("postCode")),b.$("#hother_city").val(c.get("postOffice")),b.$("#other_directions").focus()}).open()}})},{"./addressfinder.js":7}],21:[function(e,d,f){d.exports=Backbone.View.extend({el:".main.payment",mode:"private",initialize:function(){var b=this;b.$("#payment_business, #payment_type").on("change",b.changePaymentType.bind(b)),b.$("#search_corporate").on("click",b.searchCorporate.bind(b)),b.on("CORPORATE_USER_HAS_INVOICE",b.corporateUserHasInvoice),b.on("CORPORATE_USER_HAS_INVOICE_OPTIONS",b.fillInvoiceOptions),b.on("CORPORATE_USER_HAS_NO_INVOICE",b.corporateUserHasNoInvoice),b.on("PAYMENT_TYPE_CHANGED",b.toggleBonusProgram,b),b.$("#delivery_date").on("change",b.showDateHours.bind(b))},setUp:function(){var b=this;b.$("#search_corporate").click()},changePaymentType:function(){var b=this;b.mode=b.$("#payment_business").is(":checked")?"business":"private",b.trigger("PAYMENT_TYPE_CHANGED",!b.$("#payment_business").is(":checked"))},searchCorporate:function(g){g.preventDefault();var c=this;c.trigger("SEARCH_CORPORATE",c.$("#company_code").val())},corporateUserFound:function(h){var g=this;g.$(".choose_payment_type").removeClass("hidden"),g.$("#corporate_user_name").html(h.companyName);var i=h.canPayWithInvoice;g.trigger(i?"CORPORATE_USER_HAS_INVOICE":"CORPORATE_USER_HAS_NO_INVOICE"),i&&g.trigger("CORPORATE_USER_HAS_INVOICE_OPTIONS",h.references)},corporateUserNotFound:function(){var b=this;b.$(".choose_payment_type").addClass("hidden"),b.$("#business_invoice").addClass("hidden"),$("#business_payment_cash").click()},corporateUserHasInvoice:function(){var b=this;b.$(".invoice").show()},corporateUserHasNoInvoice:function(){var b=this;b.$(".invoice").hide()},fillInvoiceOptions:function(g){var c=this;c.removeInvoiceOptions(),$.each(g,function(b,h){c.createNewInvoiceOption(b,h)})},removeInvoiceOptions:function(){var b=this;b.$("#business_invoice .form-group:not(.password)").remove()},createNewInvoiceOption:function(h,g){var l=this,k=$("<div>",{"class":"form-group"}),j=$("<div>",{"class":"form-group__field"}),i=$("<input>",{type:"text",placeholder:g.info?g.info:g.label,value:g.predefined,name:"reference["+g.id+"]"});j.append(i),k.append(j),l.$("#business_invoice").append(k)},toggleBonusProgram:function(g){var c=this;g?c.$(".bonus-program").removeClass("hidden"):c.$(".bonus-program").addClass("hidden")},switchBonusProgramLabel:function(h,g,k){var j=this;j.$(".bonus-program .form-group__field").addClass("hidden");var i="bonus-customer";h?g?i="bonus-customer-has-no-money":k&&(i="bonus-customer-has-open-order"):i="not-bonus-customer",j.$(".bonus-program ."+i).removeClass("hidden"),j.changePaymentType()},fillUserData:function(g){var c=this;c.$("#firstname").val(g.firstName),c.$("#lastname").val(g.lastName),c.$("#email").val(g.email),c.$("#phone").val(g.phone),c.switchBonusProgramLabel(g.isBonusCustomer,!1,!1)},fillAvailableOpeningHours:function(g){var c=this;c.emptyAvailableOpeningHours(),c.fillDateDropDown(g),c.fillTimeDropDown(g),c.$("#delivery_date").trigger("change"),c.customizeTimeDropDowns()},fillDateDropDown:function(g){var c=this;$.each(g,function(b,h){c.$("#delivery_date").append($("<option></option>").attr("value",h.date).text(h.date_format))})},fillTimeDropDown:function(g){var c=this;$.each(g,function(b,l){var k=l.date;if(c.$("#delivery_time").append($("<optgroup></optgroup>").attr("class",k)),l.opening_time){var j,i=parseInt(l.opening_time.split(":")[0]),h=parseInt(l.closing_time.split(":")[0]);for(j=i;h>j;){$.each([[j+":00",k],[j+":15",k],[j+":30",k],[j+":45",k]],c.appendTimeToDropDown.bind(c)),j++}}})},appendTimeToDropDown:function(h,g){var k=this,j=g[0],i=g[1];k.$("#delivery_time ."+i).append($("<option></option>").attr("value",j).text(j))},emptyAvailableOpeningHours:function(){var b=this;b.$("#delivery_date").empty(),b.$("#delivery_time").empty()},customizeTimeDropDowns:function(){var b=this;b.$("#delivery_date").trigger("render.customSelect"),b.$("#delivery_time").trigger("render.customSelect")},showDateHours:function(){var g=this,c=g.$("#delivery_date").val();g.$("#delivery_time optgroup").attr("disabled",!0).addClass("hidden"),g.$("#delivery_time optgroup."+c).attr("disabled",!1).removeClass("hidden"),g.$("#delivery_time").trigger("render.customSelect")},changeDeliveryAddress:function(h,g){var i=this;i.$("#delivery_address").html(h+"<br/>"+g)}})},{}],22:[function(h,g,l){var k=h("./cart_base.js"),j=h("./paymentcart_item.js"),i=h("../models/product.js");g.exports=k.extend({el:"#payment-data",itemClass:j,itemHolder:"#cart-content",amountText:"#cart-amount",items:{},events:function(){var b=k.prototype.events;return _.isFunction(b)&&(b=b()),_.extend({},b,{"click [data-product-link]":"addUpsaleProduct"})},initialize:function(d){var c=this;c.order=d.order,c.order.on("ORDER_UPDATED",function(){c.run()}),c.initUpsaleProduct()},run:function(){var b=this;b.$el.length&&b.initContent()},initUpsaleProduct:function(){var b=this;b.upsale=new i,b.upsale.on("ORDER_UPDATED",function(e){var m=b.upsale.get("selected_variant_id"),f=$('.cart__offer-item:has([data-product-link="'+m+'"])');f.remove(),b.order.items.trigger("ORDER_UPDATED",e)})},addUpsaleProduct:function(e){var d=this,f=$(e.currentTarget);return d.upsale.clear().set("selected_variant_id",f.data("product-link")).save(),!1}})},{"../models/product.js":50,"./cart_base.js":10,"./paymentcart_item.js":23}],23:[function(f,e,h){var g=f("./cart_item_base.js");e.exports=g.extend({tagName:"tr",template:Templates.cart__itempayment,className:"cart__item"})},{"./cart_item_base.js":12}],24:[function(e,d,f){d.exports=Backbone.View.extend({user:null,phoneInput:null,pinInput:null,submitBtn:null,initialize:function(g){var c=this;c.user=g.user},listen:function(h,g,j){var i=this;i.phoneInput&&i.phoneInput.off("input"),i.phoneInput=h,i.phoneInput.on("input",function(b){i.enablePinButton(b)}),i.pinInput&&i.pinInput.off("input"),i.pinInput=g,i.pinInput.on("input",function(b){i.checkPin(b)}),i.submitBtn&&i.submitBtn.off("click"),i.submitBtn=j,i.submitBtn.on("click",function(b){return i.sendPin(b),!1}),i.user.pin.off("PIN_SENT PIN_VERIFIED error").on("PIN_SENT",function(){i.activatePinInput()}).on("PIN_VERIFIED",function(){i.pinVerified()}).on("error",function(b){i.pinVerificationError(b)})},enablePinButton:function(){var b=this;b.submitBtn.removeAttr("disabled"),b.user.pin.clear()},sendPin:function(){var b=this;return b.user.pin.sendPin(b.phoneInput.val()),!1},checkPin:function(){var g=this,c=g.pinInput.val();g.pinInput.parent().removeClass("form-group__field--failed"),c.length>=parseInt(g.pinInput.attr("maxlength"))&&!g.user.pin.verified&&g.user.pin.validatePin(c)},activatePinInput:function(){var b=this;b.submitBtn.attr("disabled","disabled"),b.pinInput.val("").removeAttr("disabled readonly").focus()},pinVerified:function(){var b=this;b.pinInput.attr("readonly","readonly").parent().addClass("form-group__field--verified").removeClass("form-group__field--failed")},pinVerificationError:function(){var b=this;b.pinInput.val("").parent().addClass("form-group__field--failed").removeClass("form-group__field--verified")}})},{}],25:[function(r,q,p){var o=r("./popup_login.js"),n=r("./popup_register.js"),m=r("./popup_forgot.js"),l=r("./popup_product.js"),k=r("./popup_ordertype.js"),j=r("./popup_order.js");q.exports=Backbone.View.extend({el:"#popup",$content:null,opened:!1,user:null,options:null,login:null,register:null,forgot:null,product:null,ordertype:null,order:null,initialize:function(d){var c=this;c.user=d.user,c.$el.length&&c.initPopup()},initPopup:function(){var b=this;b.$content=b.$("#popup-content"),b.initLogin(),b.initRegister(),b.initForgot(),b.initProduct(),b.initOrderType(),b.initOrder(),b.$el.on("CLOSED_TOGGLE",function(){b.close()})},render:function(d){var c=this;return c.$content.html(d),c},open:function(g,f,s){var i=this;if("undefined"!=typeof Templates["popup__"+g]){var h=Templates["popup__"+g];i.options=s,i.openPopup(g,h,f,s),i.$el.is(":hidden")&&i.runClose()}else{console.log("Template popup/"+g+" not found.")}},openPopup:function(g,f,s,i){var h=this;return"undefined"==typeof h[g]?!1:(h.render(h[g].render(f,s).el),h[g].open(i),General.initialize(h.$content),h.opened=!0,h[g])},close:function(){var b=this;b.login.close(),b.register.close(),b.forgot.close(),b.ordertype.close(),b.options=null,b.opened=!1,b.trigger("CLOSED")},runClose:function(){var b=this;General.runToggle("popup-open",b.$el)},initProduct:function(){var b=this;b.product=new l({user:b.user}),b.product.on("ORDER_UPDATED",function(){b.runClose(),b.options&&"function"==typeof b.options.success&&b.options.success()})},initLogin:function(){var b=this;b.login=new o({user:b.user}),b.login.on("LOGIN_FACEBOOK",function(){b.trigger("LOGIN_FACEBOOK")}).on("FORGOT_PASSWORD",function(){b.open("forgot",b.user,b.options)}).on("CREATE_ACCOUNT",function(){b.user.set({accessToken:null,userID:null,facebook:!1}),b.open("register",b.user,b.options)}).on("LOGIN_FORM",function(c){b.trigger("LOGIN_FORM",c)})},loginFailed:function(){var b=this;b.login.failed()},initRegister:function(){var b=this;b.register=new n({user:b.user}),b.register.on("GO_BACK",function(){b.open("login",b.user,b.options)}).on("REGISTRATION_COMPLETED",function(){b.options&&"function"==typeof b.options.success&&b.options.success()})},initForgot:function(){var b=this;b.forgot=new m({user:b.user}),b.forgot.on("GO_BACK",function(){b.open("login",b.user,b.options)}).on("PASSWORD_RESET",function(){b.options&&"function"==typeof b.options.success&&b.options.success()})},initOrderType:function(){var b=this;b.ordertype=new k({user:b.user}),b.user.order.ordertype.on("ORDERTYPE_VERIFIED",function(){b.options&&"function"==typeof b.options.success&&b.options.success()}),b.ordertype.on("SUBMIT_ORDERTYPE",function(c){b.user.order.ordertype.clear().save(c)})},initOrder:function(){var b=this;b.order=new j({user:b.user})}})},{"./popup_forgot.js":27,"./popup_login.js":28,"./popup_order.js":29,"./popup_ordertype.js":30,"./popup_product.js":33,"./popup_register.js":34}],26:[function(e,d,f){d.exports=Backbone.View.extend({user:null,options:null,model:null,template:null,events:{"click #popup-back":"goBack"},initialize:function(g){var c=this;c.user=g.user},open:function(g){var c=this;g&&(c.options=g),c.delegateEvents()},close:function(){var b=this;b.options=null,b.undelegateEvents()},render:function(h,g){var j=this,i=null;return"undefined"!=typeof j.model&&(j.model=g,j.model&&(i=j.model.toJSON())),j.template=h,j.$el.html(h(i)),j},goBack:function(){var b=this;return b.trigger("GO_BACK"),!1}})},{}],27:[function(f,e,h){var g=f("./popup_user_base.js");e.exports=g.extend({events:function(){var b=g.prototype.events;return _.isFunction(b)&&(b=b()),_.extend({},b,{"submit form":"submitForm"})},render:function(i,d){var k=this,j=g.prototype.render.call(k,i,d);return k.validator.listen(k.$("#phone"),k.$("#pin"),k.$("#send-pin")),j},open:function(d){var c=this;g.prototype.open.call(c,d),c.user.pin.check=204,c.user.pin.clear().on("PIN_VERIFIED",function(){c.$("#password").focus()}).on("USER_DOES_NOT_EXSIST",function(){console.log("USER_DOES_NOT_EXSIST")}),c.user.on("PASSWORD_RESET",function(){c.trigger("PASSWORD_RESET")})},submitForm:function(){var b=this;return b.user.resetPassword(b.$("form").serializeObject()),!1}})},{"./popup_user_base.js":35}],28:[function(f,e,h){var g=f("./popup_user_base.js");e.exports=g.extend({events:{"click #fb-btn":"loginFacebook","submit form":"loginForm","click #forgot-btn":"forgotPassword","click #create-btn":"createAccount"},failed:function(){var b=this;b.$('[name="password"]').val("")},loginFacebook:function(){var b=this;return b.trigger("LOGIN_FACEBOOK"),!1},loginForm:function(){var b=this;return b.trigger("LOGIN_FORM",b.$("form").serializeObject()),!1},forgotPassword:function(){var b=this;return b.trigger("FORGOT_PASSWORD"),!1},createAccount:function(){var b=this;return b.trigger("CREATE_ACCOUNT"),!1}})},{"./popup_user_base.js":35}],29:[function(f,e,h){var g=f("./popup_base.js");e.exports=g.extend({events:function(){var b=g.prototype.events;return _.isFunction(b)&&(b=b()),_.extend({},b,{})}})},{"./popup_base.js":26}],30:[function(t,s,r){var q=t("./popup_base.js"),p=t("./addressfinder.js"),o=t("./restaurantfinder.js"),n=t("./restaurantfinder_item.js"),m=t("../models/restaurant.js"),l=t("./popup_ordertype_takeaway.js"),k=t("./popup_ordertype_delivery.js");s.exports=q.extend({homeAddressFinder:null,workAddressFinder:null,otherAddressFinder:null,restaurantFinder:null,latestRestaurant:null,takeaway:null,delivery:null,events:function(){var b=q.prototype.events;return _.isFunction(b)&&(b=b()),_.extend({},b,{"submit form":"submitForm"})},initialize:function(d){var c=this;q.prototype.initialize.call(c,d),c.restaurantFinder=new o,c.restaurantFinder.on("FOUND_NEARBY",function(){c.insertRetaurantSuggestion(c.restaurantFinder.restaurants.at(0))}),c.takeaway=new l({collection:c.restaurantFinder.restaurants}),c.takeaway.on("GO_BACK",function(){c.reset()}).on("SELECTED_RESTAURANT",function(b){c.$('[name="restaurant"]').val(b),c.submitForm()}),c.delivery=new k,c.delivery.on("GO_BACK",function(){c.reset()}).on("DELIVERY_CONFIRMED",function(){c.$('[name="confirmed"]').val("true"),c.submitForm()}),c.user.on("sync",function(){c.checkLatestRestaurant()}),c.checkLatestRestaurant()},render:function(e,d){var f=this;return q.prototype.render.call(f,e,d),f.initAddressFinders(),f},initAddressFinders:function(){var b=this;b.homeAddressFinder=new p({input:b.$("#home-address")}),b.homeAddressFinder.on("ADDRESS_CHOSEN",function(c){b.$('[name="addresses[home][address]"]').val(c.get("address")),b.$('[name="addresses[home][postCode]"]').val(c.get("postCode")),b.$('[name="addresses[home][postOffice]"]').val(c.get("postOffice")),b.$('[name="addresses[home][directions]"]').focus()}),b.workAddressFinder=new p({input:b.$("#work-address")}),b.workAddressFinder.on("ADDRESS_CHOSEN",function(c){b.$('[name="addresses[work][address]"]').val(c.get("address")),b.$('[name="addresses[work][postCode]"]').val(c.get("postCode")),b.$('[name="addresses[work][postOffice]"]').val(c.get("postOffice")),b.$('[name="addresses[work][directions]"]').focus()}),b.otherAddressFinder=new p({input:b.$("#other-address")}),b.otherAddressFinder.on("ADDRESS_CHOSEN",function(c){b.$('[name="addresses[other][address]"]').val(c.get("address")),b.$('[name="addresses[other][postCode]"]').val(c.get("postCode")),b.$('[name="addresses[other][postOffice]"]').val(c.get("postOffice")),b.$('[name="addresses[other][directions]"]').focus()})},open:function(d){var c=this;q.prototype.open.call(c,d),c.$(".dropdown").on("OPENED_EXPANDED",function(){var b=$(this);b.find("fieldset").removeAttr("disabled")}).on("CLOSED_EXPANDED",function(){var b=$(this);b.find("fieldset").attr("disabled","disabled")}),c.$el.after(c.takeaway.$el),c.$el.after(c.delivery.$el),c.latestRestaurant?c.insertRetaurantSuggestion(c.latestRestaurant):c.restaurantFinder.checkNearby(),c.homeAddressFinder.open(),c.workAddressFinder.open(),c.otherAddressFinder.open(),c.takeaway.open(),c.delivery.open(),c.reset()},checkLatestRestaurant:function(){var d=this,c=d.user.get("lastUsedTakeawayRestaurant");c&&(d.latestRestaurant=new m(c))},insertRetaurantSuggestion:function(e){var d=this,f=new n({model:e});f.on("FOCUSED_RESTAURANT",function(b){d.$('[name="restaurant"]').val(b.get("id"))}).on("BLURRED_RESTAURANT",function(){d.$('[name="restaurant"]').val("")}),d.$("#restaurants-init-closest").prepend(f.render().el).removeClass("hidden"),f.focus(),d.$('[name="position"]').on("focus",function(){f.blur()})},close:function(){var b=this;q.prototype.close.call(b),b.homeAddressFinder&&b.homeAddressFinder.close(),b.workAddressFinder&&b.workAddressFinder.close(),b.otherAddressFinder&&b.otherAddressFinder.close(),b.$(".dropdown").off("OPENED_EXPANDED CLOSED_EXPANDED")},reset:function(){var b=this;b.$el.show(),b.takeaway.$el.hide(),b.delivery.$el.hide()},clickedTab:function(d){var c=this;d.preventDefaults(),d.stopPropagation(),c.focusedTab(d)},focusedTab:function(e){var d=$(e.currentTarget),f=$(d.data("expand"));f.hasClass("closed")&&d.trigger("click")},openTakeaway:function(){var b=this;b.$el.hide(),b.takeaway.$el.show()},openDelivery:function(d){var c=this;c.$el.hide(),c.delivery.model=d,c.delivery.render(),c.delivery.$el.show()},submitForm:function(){var e=this,d=e.$("form").serializeObject();if("DELIVERY"===d.type){var f=d.addressType.toLowerCase();d.address=d.addresses[f].address,d.postCode=d.addresses[f].postCode,d.postOffice=d.addresses[f].postOffice,d.directions=d.addresses[f].directions,delete d.addresses}return"TAKEAWAY"!==d.type||d.restaurant&&""!==d.restaurant?"DELIVERY"===d.type&&"true"!==d.confirmed?e.restaurantFinder.search(d.address+" "+d.postCode,function(){console.log("FOUND_CLOSEST_SUGGESTION",e.restaurantFinder.restaurants.length),e.restaurantFinder.restaurants.length&&e.openDelivery(e.restaurantFinder.restaurants.at(0))}):(e.$('[name="confirmed"]').val("false"),e.trigger("SUBMIT_ORDERTYPE",d)):e.restaurantFinder.search(d.position,function(){console.log("FOUND_SEARCH",e.restaurantFinder.restaurants.models),e.openTakeaway()}),!1}})},{"../models/restaurant.js":52,"./addressfinder.js":7,"./popup_base.js":26,"./popup_ordertype_delivery.js":31,"./popup_ordertype_takeaway.js":32,"./restaurantfinder.js":37,"./restaurantfinder_item.js":38}],31:[function(g,f,j){var i=g("./popup_base.js"),h=g("./restaurantfinder_item.js");f.exports=i.extend({restaurant:null,template:Templates.popup__delivery,events:function(){var b=i.prototype.events;return _.isFunction(b)&&(b=b()),_.extend({},b,{"submit form":"submitForm"})},initialize:function(){var b=this;b.$el.hide()},render:function(){var b=this;return b.$el.html(b.template(b.model.toJSON())),b.renderRestaurant(),b.delegateEvents(),b},open:function(){var b=this;b.delegateEvents()},renderRestaurant:function(){var b=this;b.restaurant=new h({model:b.model}),b.$("#restaurant-suggestion").html(b.restaurant.render().el),b.restaurant.focus()},submitForm:function(){var b=this;return b.trigger("DELIVERY_CONFIRMED"),!1}})},{"./popup_base.js":26,"./restaurantfinder_item.js":38}],32:[function(g,f,j){var i=g("./popup_base.js"),h=g("./restaurantfinder_item.js");f.exports=i.extend({restaurants:null,template:Templates.popup__takeaway,events:function(){var b=i.prototype.events;return _.isFunction(b)&&(b=b()),_.extend({},b,{"submit form":"submitForm"})},initialize:function(d){var c=this;i.prototype.initialize.call(c,d),c.$el.hide(),c.collection.on("sync",function(){c.render()})},render:function(){var b=this;return b.$el.html(b.template()),b.renderItems(),General.initialize(b.$el),b.delegateEvents(),b},open:function(){var b=this;b.delegateEvents()},close:function(){var d=this;for(var c in d.restaurants){d.restaurants[c].off("FOCUSED_RESTAURANT"),d.restaurants[c].remove()}d.restaurants=[],i.prototype.close.call(d)},renderItems:function(){var b=this;b.restaurants=[],b.collection.each(function(e,l){var k=new h({model:e});k.on("FOCUSED_RESTAURANT",function(d){for(var m in b.restaurants){b.restaurants[m]!==this&&b.restaurants[m].blur()}b.selectRestaurant(d)}),b.restaurants.push(k),0===l?(b.$("#restaurants-closest").append(k.render().el),setTimeout(function(){k.focus()},100)):b.$("#restaurants-rest-content").append(k.render().el)}),b.collection.length>1?b.$("#restaurants-rest").removeClass("hidden"):b.$("#restaurants-rest").addClass("hidden")},selectRestaurant:function(d){var c=this;c.$('[name="restaurant"]').val(d.get("id"))},submitForm:function(){var d=this,c=d.$("form").serializeObject();return d.trigger("SELECTED_RESTAURANT",c.restaurant),!1}})},{"./popup_base.js":26,"./restaurantfinder_item.js":38}],33:[function(f,e,h){var g=f("./product_base.js");e.exports=g.extend({events:function(){var b=g.prototype.events;return _.isFunction(b)&&(b=b()),_.extend({},b,{})},open:function(d){var c=this;g.prototype.open.call(c,d),c.changeVariant(),c.changeQuantity(),c.setAmount(),c.model.off("change:variant").on("change:variant",function(){c.model.set("base",c.model.toJSON()),c.checkCustomizable()}).on("ORDER_UPDATED",function(b){c.trigger("ORDER_UPDATED",b)}),c.model.set("base",c.model.toJSON()),c.checkCustomizable()},checkCustomizable:function(){var j,i,l=this,k=l.model.get("variant");k?(j=k.customizable,i=k.num_free_ingredients):(j=l.model.get("customizable"),i=l.model.get("num_free_ingredients")),j&&"false"!==j?l.$("#customize-btn").removeClass("hidden"):l.$("#customize-btn").addClass("hidden"),i&&i>0?l.$("#add-to-cart-btn").addClass("hidden"):l.$("#add-to-cart-btn").removeClass("hidden")}})},{"./product_base.js":36}],34:[function(f,e,h){var g=f("./popup_user_base.js");e.exports=g.extend({events:function(){var b=g.prototype.events;return _.isFunction(b)&&(b=b()),_.extend({},b,{"submit form":"submitForm"})},render:function(i,d){var k=this,j=g.prototype.render.call(k,i,d);return k.validator.listen(k.$("#phone"),k.$("#pin"),k.$("#send-pin")),j},open:function(d){var c=this;g.prototype.open.call(c,d),c.user.get("facebook")?c.user.pin.check=0:c.user.pin.check=205,c.user.pin.clear().on("PIN_VERIFIED",function(){c.$("#firstname").focus()}).on("USER_EXSISTS",function(){console.log("USER_EXSISTS")}),c.user.on("REGISTRATION_COMPLETED",function(){c.trigger("REGISTRATION_COMPLETED")})},submitForm:function(){var b=this;return b.user.register(b.$("form").serializeObject()),!1}})},{"./popup_user_base.js":35}],35:[function(g,f,j){var i=g("./popup_base.js"),h=g("./pin_validator.js");f.exports=i.extend({validator:null,initialize:function(d){var c=this;c.validator=new h({user:d.user}),i.prototype.initialize.call(c,d)},open:function(d){var c=this;i.prototype.open.call(c,d),c.user&&(c.user.on("LOGIN_COMPLETED",function(){c.options&&"function"==typeof c.options.success&&c.options.success()}),c.user.pin.on("PIN_VERIFIED",function(){c.$("[disabled]:not(#send-pin)").removeAttr("disabled")}))},close:function(){var b=this;i.prototype.close.call(b),b.user&&(b.user.off("LOGIN_COMPLETED"),b.user.pin.off("PIN_SENT PIN_VERIFIED USER_DOES_NOT_EXSIST USER_EXSISTS"))}})},{"./pin_validator.js":24,"./popup_base.js":26}],36:[function(f,e,h){var g=f("./popup_base.js");e.exports=g.extend({events:function(){var b=g.prototype.events;return _.isFunction(b)&&(b=b()),_.extend({},b,{"change #cooking":"changeCookingOptions","change #variants":"changeVariant","input #quantity":"changeQuantity","submit form":"submitForm"})},initialize:function(d){var c=this;g.prototype.initialize.call(c,d)},open:function(d){var c=this;g.prototype.open.call(c,d),c.rewriteVariants()},submitForm:function(){var b=this;return b.model.off("ORDER_UPDATED").on("ORDER_UPDATED",function(c){b.user.order.items.contains(b.model)||b.user.order.items.trigger("ORDER_UPDATED",c)}),b.model.save(),!1},rewriteVariants:function(){var b=this;b.$("#variants").html(""),b.model.variants.each(function(d){var i=$("<option>");i.val(d.get("id")).html(d.get("name")).attr("data-subtext",d.get("description")),d.get("id")===b.model.get("selected_variant_id")&&i.attr("selected","selected"),b.$("#variants").append(i)}),b.$("#variants").trigger("change")},rewriteInfo:function(){var b=this;b.$("#product-image").html(b.model.get("image")),b.$("#product-name").html(b.model.get("name")),b.$("#product-info").html(b.infoTemplate(b.model.toJSON()))},rewriteCookingOptions:function(){var j=this;if(j.model.selectedVariant){var i=j.model.selectedVariant.get("cooking_options");j.$("#cooking").html("");for(var l in i){var k=$("<option>").val(i[l].key).html(i[l].value);i[l].key===j.model.get("selected_cooking_option")&&k.attr("selected","selected"),j.$("#cooking").append(k)}j.$("#cooking").trigger("change")}},changeVariant:function(){var d=this,c=d.$("#variants").val();d.model.set("selected_variant_id",c),d.rewriteCookingOptions(),d.setAmount()},changeCookingOptions:function(){var d=this,c=d.$("#cooking").val();d.model.set("selected_cooking_option",c),d.setAmount()},changeQuantity:function(){var d=this,c=parseInt(d.$("#quantity").val());d.model.set("quantity",c),d.setAmount()},setAmount:function(){var b=this;b.$("#product-amount").html(b.model.get("amount"))}})},{"./popup_base.js":26}],37:[function(f,e,h){var g=f("../collections/restaurantcollection.js");e.exports=Backbone.View.extend({template:Templates.form__restaurantfinder,restaurants:null,initialize:function(){var b=this;b.restaurants=new g},checkNearby:function(){var b=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(c){b.restaurants.findByPosition(c.coords.latitude,c.coords.longitude,function(){b.restaurants.length&&b.trigger("FOUND_NEARBY")})})},search:function(i,d){var j=this;j.restaurants.findByString(i,function(){j.restaurants.length&&("function"==typeof d&&d(),j.trigger("FOUND_SEARCH"))})}})},{"../collections/restaurantcollection.js":6}],38:[function(e,d,f){d.exports=Backbone.View.extend({template:Templates["form__restaurantfinder-item"],model:null,tagName:"li",className:"restaurant-list__item",events:{click:"focus",focus:"focusedItem"},initialize:function(){var b=this;b.$el.attr("tabindex",0)},render:function(){var b=this;return b.$el.html(b.template(b.model.toJSON())).attr("data-link-block","#"),b.$("a:first").click(function(){b.clickedRestaurant()}),b},clickedRestaurant:function(){var b=this;return b.trigger("CLICKED_RESTAURANT",b.model),!1},focus:function(){var b=this;return setTimeout(function(){b.$el.focus()},100),b.focusedItem(),!1},focusedItem:function(){var b=this;b.$el.addClass("focus"),b.trigger("FOCUSED_RESTAURANT",b.model)},blur:function(){var b=this;b.$el.blur(),b.blurredItem()},blurredItem:function(g){var c=this;c.$el.removeClass("focus"),g||c.trigger("BLURRED_RESTAURANT",c.model)}})},{}],39:[function(e,d,f){d.exports=function(){return{$html:null,$window:null,$document:null,scrollTop:0,scrollLimit:30,initialize:function(){var b=this;b.$html=$("html"),b.$window=$(window),b.$document=$(document),b.scrollTop=b.$window.scrollTop()<0?0:b.$window.scrollTop(),b.initFollowers(),b.initScrollButton()},initFollowers:function(){var g=this,c=[];$("[data-follow]").each(function(b,i){var h=$(i);h.data("top",h.offset().top),c.push(h)}),c.length&&g.$document.on("scroll",function(){g.scrollTop=g.$window.scrollTop(),g.scrollTop=g.scrollTop<0?0:g.scrollTop;for(var j in c){var i=c[j],h=i.data("following"),b=i.data("top");b<=g.scrollTop&&!h?(i.addClass("following"),i.data("following",!0)):b>g.scrollTop&&h&&(i.removeClass("following"),i.data("following",!1))}}).trigger("scroll")},initScrollButton:function(){var h,g,l=this,k=2000,j=$("#scrollToTop"),i=!1;$(document).on("touchstart",function(c){h=c.originalEvent.targetTouches[0].clientY}).on("touchmove",function(c){var b=h-c.originalEvent.targetTouches[0].clientY;g&&(clearTimeout(g),g=null),g=setTimeout(function(){j.removeClass("visible"),i=!1},k),b>5||l.scrollTop<=200?(j.removeClass("visible"),i=!1):-5>b&&l.scrollTop>200&&(j.addClass("visible"),i=!0)}),j.on("click",function(){j.removeClass("visible"),$("html:not(:animated),body:not(:animated)").animate({scrollTop:0},500)})}}}},{}],40:[function(g,f,j){var i=g("./cart_base.js"),h=g("./sidecart_item.js");f.exports=i.extend({el:"#sidecart",itemClass:h,itemHolder:"#sidecart-items",amountText:"#sidecart-amount",items:{},events:function(){var b=i.prototype.events;return _.isFunction(b)&&(b=b()),_.extend({},b,{"click #change-delivery":"changeDelivery"})},initialize:function(d){var c=this;c.order=d.order,c.initCartBtn()},initCartBtn:function(){var b=this;$("#header-cart").click(function(){return b.trigger("OPEN_CART"),!1}),b.order.on("ORDER_UPDATED",function(){b.updateCartBtn()}),b.updateCartBtn()},updateCartBtn:function(){var d=this,c=0;d.order.items.each(function(b){var e=b.get("quantity");e&&(c+=e)}),$("#header-cart .header-cart__items").html(c)},open:function(){var b=this;b.initContent(),General.runToggle("cart-open",b.$el)},close:function(){var b=this;b.removeContent(),console.log("CLOSE_CART")},changeDelivery:function(){var b=this;return b.trigger("CHANGE_DELIVERY"),!1}})},{"./cart_base.js":10,"./sidecart_item.js":41}],41:[function(f,e,h){var g=f("./cart_item_base.js");e.exports=g.extend({template:Templates.cart__item,className:"cart__item"})},{"./cart_item_base.js":12}],42:[function(e,d,f){d.exports={initialize:function(g){var c=this;c.initLinkBlock(g),c.initToggle(g),c.initToggleOpen(g),c.initDropdowns(g),c.initExpand(g),c.initCheckRadioStyle(g),c.initSelectStyle(g),c.initClamp(g),c.initQuantityPickers(g),c.initRadioOpen(g),c.initCustomSelect(g),c.initSelectOpen(g),c.initGrid(g),c.initClearFields(g)},getTarget:function(g,c){return"undefined"!=typeof g&&g?g.is(c)?g:g.find(c):$(c)},initLinkBlock:function(g){var c=this;c.getTarget(g,"[data-link-block]").off("click").on("click",function(i){var h=$(this).data("link-block"),j=$(this).find("a:first");return h&&""!==h&&"#"!==h||(h=j.attr("href")),""===h||"#"===h.charAt(0)?j.get(0)!==i.target&&(j.trigger("click"),i.stopPropagation()):window.location.href=h,!1})},initToggle:function(g){var c=this;c.getTarget(g,"[data-toggle]").off("click").on("click",function(){var b=$(this),i=b.data("toggle-hidden"),h=i?$(i):null;return c.runToggle(b.data("toggle"),h),!1})},runToggle:function(g,c){c?c.hasClass("hidden")?(c.removeClass("hidden").trigger("OPENED_TOGGLE"),setTimeout(function(){$("html").toggleClass(g)},50)):($("html").toggleClass(g),setTimeout(function(){c.addClass("hidden").trigger("CLOSED_TOGGLE")},300)):$("html").toggleClass(g)},initToggleOpen:function(g){var c=this;c.getTarget(g,"[data-toggle-open]").off("click").on("click",function(){var b=$($(this).data("toggle-open"));return b.length&&(b.toggleClass("open"),b.hasClass("open")?($(this).addClass("open"),b.trigger("OPENED")):($(this).removeClass("open"),b.trigger("CLOSED"))),!1})},initDropdowns:function(h){var g=this,i=g.getTarget(h,"[data-toggle-dropdown]");i.each(function(k,j){var l=$(j).data("toggle-dropdown");l&&$(l).addClass("closed")}),i.on("click",function(b){var l,k=$(this),j=k.data("toggle-dropdown");return j&&(l=$(j)),l&&l.length?(b.preventDefault(),b.stopPropagation(),g.toggleDropdown(l),!1):void 0})},toggleDropdown:function(g){var c=this;g.toggleClass("closed"),g.hasClass("closed")?$(document).off("click"):($(document).on("click",function(){c.toggleDropdown(g),$(document).off("click"),g.trigger("CLOSED_DROPDOWN")}),g.trigger("OPENED_DROPDOWN"))},initExpand:function(h){var g=this,i=g.getTarget(h,"[data-expand]");i.data("ddTimeout",null).on("click",function(t){var s,r,q=$(this),p=q.data("expand"),o=q.data("collapse");if(p&&(s=$(p)),o&&(r=$(o)),s&&s.length){t.preventDefault();var n=s.data("ddTimeout"),m="-webkit-transition-property:none !important; -webkit-transition-duration:0 !important;",l=m+"height:auto !important;";s.attr("style",l);var k="height: "+s.outerHeight()+"px;";return s.attr("style",m+k),setTimeout(function(){s.attr("style",k),s.toggleClass("closed"),s.hasClass("closed")?s.trigger("CLOSED_EXPANDED"):(n&&(clearTimeout(n),n=null),n=setTimeout(function(){s.attr("style",l),n=null},270),s.trigger("OPENED_EXPANDED"),r&&r.each(function(u,j){var v=$(j);v.hasClass("closed")||$('[data-expand="#'+v.attr("id")+'"]').trigger("click")}))},30),q.toggleClass("is-open"),!1}}),i.each(function(k,j){var l=$(j);l.is("[data-expand-onload]")&&setTimeout(function(){l.trigger("click")},50)})},initCheckRadioStyle:function(g){var c=this;c.getTarget(g,'input[type="radio"],input[type="checkbox"]').checkboxRadioUI({label:!1})},initSelectStyle:function(g){var c=this;c.getTarget(g,".form-group select:not([data-disable-custom],:has([data-subtext],[data-content]))").customSelect({customClass:"form-group__select"})},initClamp:function(h){var g=this,i=g.getTarget(h,"[data-clamp]");$.each(i,function(j,c){$(c).text()&&$clamp($(c).get(0),{clamp:parseInt($(c).data("clamp"))})})},initQuantityPickers:function(g){var c=this;c.getTarget(g,".quantity-picker").each(function(i,h){var k=$(h),j=k.find("input");k.find(".quantity-picker__controller--minus").click(function(m){m.preventDefault();var l=parseInt(j.val());l>0&&j.val(l-1).trigger("input")}),k.find(".quantity-picker__controller--plus").click(function(m){m.preventDefault();var l=parseInt(j.val());j.val(l+1).trigger("input")}),k.find(".quantity-picker__controller--remove").click(function(b){b.preventDefault(),j.trigger("REMOVE")}),j.on("input",function(){var b=parseInt(j.val());b>1?k.removeClass("quantity-picker--removable"):k.addClass("quantity-picker--removable")}).trigger("input")})},initRadioOpen:function(g){var c=this;c.getTarget(g,"[data-radio-open]").each(function(i,h){var k=$(h),j=$(k.data("radio-open"));j.length&&(k.is(":checked")||j.addClass("hidden"),k.on("change",function(){k.is(":checked")?(j.removeClass("hidden"),"radio"===k.attr("type").toLowerCase()&&$($('[name="'+k.attr("name")+'"]').not(k).data("radio-open")).addClass("hidden")):j.addClass("hidden")}).trigger("change"))})},initCustomSelect:function(g){var c=this;c.getTarget(g,"select:has([data-subtext],[data-content])").each(function(i,h){var j=$(h);j.selectpicker()})},initSelectOpen:function(g){var c=this;c.getTarget(g,"select[data-select-open]").each(function(i,h){var j=$(h);j.on("change",function(){j.find("[data-select-open-target]").each(function(l,k){var n=$(k),m=$(n.data("select-open-target"));n.is(":checked")?m.removeClass("hidden"):m.addClass("hidden")})}).trigger("change")})},initGrid:function(h){var g=this;g.getTarget(h,"[data-grid]").masonry({itemSelector:".grid__elm",transitionDuration:0,columnWidth:300});var j=g.getTarget(h,"[data-large-grid-style]");if(j.length){var i=$('<style type="text/css">').html("@media (min-width: 600px) {");j.each(function(l,k){var o=$(k),n=o.attr("id");n||(n="grid"+Math.round(10000000*Math.random()),o.attr("id",n));var m="#"+n+"{"+o.data("large-grid-style").split(";").join(" !important;")+"}";i.append(m)}),i.append("}").appendTo("head")}},initClearFields:function(g){var c=this;c.getTarget(g,"[data-clear-fields]").click(function(){var i=$(this),h=$(i.data("clear-fields"));return console.log("clear fields",h),h.length,!1})}}},{}],43:[function(N,M,L){var K=N("./helpers/general.js"),J=N("./models/user.js"),I=N("./models/product.js"),H=N("./models/restaurant.js"),G=N("./controllers/scroll.js"),F=N("./controllers/header.js"),E=N("./controllers/popup.js"),D=N("./controllers/facebook.js"),C=N("./controllers/sidecart.js"),B=N("./controllers/menu.js"),A=N("./controllers/cart.js"),z=N("./controllers/paymentcart.js"),y=N("./controllers/customize.js"),x=N("./controllers/payment.js"),w=N("./controllers/myorders.js"),v=N("./controllers/myprofile.js"),u=function(){return{initialize:function(){var b=this;b.initLoginButtons(),window.General=K,K.initialize(),b.initModels(),b.initControllers(),b.checkLogin()},checkLogin:function(){var b=this;b.user.checkLogin(function(){b.facebook.load()})},logIn:function(d){var c=this;c.user.logIn(d)},loggedIn:function(){var b=this;$("html").addClass("logged-in").removeClass("logged-out"),b.payment.fillUserData(b.user.attributes)},initLoginButtons:function(){var b=this;$("[data-require-login]").click(function(e){var g=$(e.currentTarget),f=g.attr("href");b.user.loggedIn?"#"!==f?window.location.href=f:g.trigger("click",e):(e.preventDefault(),e.stopImmediatePropagation(),b.popup.open("login",b.user,{success:function(){b.popup.runClose(),"#"!==f?window.location.href=f:g.trigger("click",e)}}))})},user:null,product:null,initModels:function(){var b=this;b.initUser(),b.initProduct(),b.initRestaurant()},initUser:function(){var b=this;b.user=new J,b.user.on("LOGIN_COMPLETED",function(){b.loggedIn()}).on("LOGIN_FAILED",function(){b.popup.loginFailed()}).on("SHOW_MESSAGES",function(c){console.log("User SHOW_MESSAGES",c),b.showPopupMessages(c)})},initProduct:function(){var d=this;if(""!==window.location.hash&&window.location.hash.length>1){var c=parseInt(window.location.hash.substr(1));isNaN(c)||(d.loadProduct(c),window.location.hash="")}},initRestaurant:function(){var b=this;b.restaurant=new H,b.restaurant.on("SHOW_MESSAGES",function(c){console.log("Restaurant SHOW_MESSAGES",c),b.showPopupMessages(c)}),b.user.order.on("change:restaurant",b.restaurant.fetchOpeningHours,b.restaurant),b.user.order.on("change:restaurant",b.restaurant.fetchRestaurant,b.restaurant)},loadProduct:function(e){var d=this,f=new I;f.on("PRODUCT_LOADED",function(){d.popup.open("product",f,{success:function(){d.sidecart.open()}})}).on("SHOW_MESSAGES",function(b){console.log("Product SHOW_MESSAGES",b),d.showPopupMessages(b)}),f.load(e)},scroll:null,header:null,popup:null,myOrders:null,facebook:null,sidecart:null,menu:null,cart:null,customize:null,initControllers:function(){var b=this;b.initScroll(),b.initHeader(),b.initPopup(),b.initFacebook(),b.initSideCart(),b.initMenu(),b.initCart(),b.initPaymentCart(),b.initCustomize(),b.initPayment(),b.initMyOrders(),b.initMyProfile()},initScroll:function(){var b=this;b.scroll=new G,b.scroll.initialize()},initHeader:function(){var b=this;b.header=new F({user:b.user})},initPopup:function(){var b=this;b.popup=new E({user:b.user}),b.popup.on("LOGIN_FACEBOOK",function(){b.facebook.logIn(function(c){c&&(b.user.off("LOGIN_FACEBOOK_AUTH").on("LOGIN_FACEBOOK_AUTH",function(){b.facebook.loadInfo(function(d){d&&b.user.set({email:d.email,firstName:d.first_name,lastName:d.last_name}),b.popup.open("register",b.user,b.popup.options)})}),b.logIn(c))})}),b.popup.on("LOGIN_FORM",function(c){b.logIn(c)})},showPopupMessages:function(d){var c=this;c.popup.opened?c.popup.once("CLOSED",function(){console.log("Run delayed popup messages",d)}):console.log("Run popup messages",d)},initFacebook:function(){var b=this;b.facebook=new D},initSideCart:function(){var b=this;b.sidecart=new C({order:b.user.order}),b.sidecart.on("OPEN_CART",function(){b.user.loggedIn?b.sidecart.open():b.popup.open("login",b.user,{success:function(){b.popup.runClose(),setTimeout(function(){b.sidecart.open()},50)}})}).on("CHANGE_DELIVERY",function(){K.runToggle("cart-open",b.sidecart.$el),b.popup.open("ordertype",null,{success:function(){window.location.reload()}})})},initCart:function(){var b=this;b.cart=new A({order:b.user.order})},initPaymentCart:function(){var b=this;b.paymentcart=new z({order:b.user.order})},initMenu:function(){var b=this;b.menu=new B,b.menu.on("OPEN_PRODUCT",function(c){b.user.loggedIn?b.openProduct(c):b.popup.open("login",b.user,{success:function(){b.openProduct(c)}})})},initPayment:function(){var b=this;b.payment=new x,b.payment.on("SEARCH_CORPORATE",b.user.searchCorporate,b.user),b.user.on("CORPORATE_USER_FOUND",b.payment.corporateUserFound,b.payment),b.user.on("CORPORATE_USER_NOT_FOUND",b.payment.corporateUserNotFound,b.payment),b.restaurant.on("CHANGE_AVAILABLE_OPENING_HOURS",b.payment.fillAvailableOpeningHours,b.payment),b.restaurant.on("NO_AVAILABLE_OPENING_HOURS",b.payment.emptyAvailableOpeningHours,b.payment),b.restaurant.on("CHANGE_RESTAURANT",b.payment.changeDeliveryAddress,b.payment),b.payment.setUp()},initMyOrders:function(){var b=this;b.myOrders=new w,b.myOrders.on("OPEN_ORDER",function(c){b.popup.open("order",c)})},initMyProfile:function(){var b=this;b.myProfile=new v({user:b.user})},openProduct:function(d){var c=this;c.user.order.get("type")?c.loadProduct(d):c.popup.open("ordertype",c.user,{success:function(){window.location.hash=d,window.location.reload()}})},initCustomize:function(){var b=this;b.customize=new y({user:b.user})}}};window.App=new u,function(b){b.App.initialize()}(window)},{"./controllers/cart.js":9,"./controllers/customize.js":13,"./controllers/facebook.js":16,"./controllers/header.js":17,"./controllers/menu.js":18,"./controllers/myorders.js":19,"./controllers/myprofile.js":20,"./controllers/payment.js":21,"./controllers/paymentcart.js":22,"./controllers/popup.js":25,"./controllers/scroll.js":39,"./controllers/sidecart.js":40,"./helpers/general.js":42,"./models/product.js":50,"./models/restaurant.js":52,"./models/user.js":54}],44:[function(e,d,f){d.exports=Backbone.Model.extend({initialize:function(){var b=this;b.on("sync",function(h,g,i){switch(i.xhr.status){case 203:console.log(i.xhr.status,"Web closed",g.messages);break;case 206:console.log(i.xhr.status,"Show message",g.messages)}}).on("error",function(h,g,i){switch(console.log("model error",i.xhr.status,g.responseJSON),i.xhr.status){case 503:console.log(i.xhr.status,"Web closed",g.responseJSON.messages)}})},parse:function(b){return !b.error&&b.data?b.data:b},deleteAttribute:function(g,c){return g[c]&&delete g[c],g}})},{}],45:[function(f,e,h){var g=f("./base.js");e.exports=g.extend({defaults:{extraModel:null},idAttribute:"os_product_id",initialize:function(){var b=this;g.prototype.initialize.call(b),b.on("change:extra",function(){b.checkExtra()}),b.checkExtra()},checkExtra:function(){var i=this,d=i.get("extra"),j=i.get("extraModel");d&&(j?(console.log("extra existed",d),j.set(d)):(j=new g(d),j.on("change",function(){i.set({extra:j.toJSON()},{silent:!0}),i.trigger("change",i)}),i.set({extraModel:j},{silent:!0})))},toJSON:function(){var d=this,c=g.prototype.toJSON.call(d);return c.extraModel&&delete c.extraModel,c}})},{"./base.js":44}],46:[function(i,h,n){var m=i("./base.js"),l=i("./product.js"),k=i("../collections/productcollection.js"),j=i("./ordertype.js");h.exports=m.extend({url:function(){var d=this,c=d.get("id");return window.API_PATH_ORDER+(c?"/"+c:"")+".json"},defaults:{amount:0},items:null,ordertype:null,initialize:function(){var b=this;m.prototype.initialize.call(b),b.items=new k,b.items.on("change add remove",function(c){c.save()}).on("ORDER_UPDATED",function(c){b.set(c),b.updateItems(),b.trigger("ORDER_UPDATED")}),b.ordertype=new j,b.ordertype.on("ORDERTYPE_VERIFIED",function(){b.set("type",b.ordertype.toJSON())}),b.on("sync",function(){b.updateItems(),b.trigger("ORDER_UPDATED")}),b.updateItems()},toJSON:function(){var d=this,c=m.prototype.toJSON.call(d);return c.items=d.items.toJSON(),c},add:function(e){var d=this,f=d.items.get(e.get("id"));f?f.set("quantity",f.get("quantity")+e.get("quantity")):d.items.add(e)},remove:function(d){var c=this;c.items.remove(d)},updateItems:function(){var g=this,e=g.get("items"),q=[];for(var p in e){var o=g.items.get(e[p].id);o?o.set(e[p]):o=new l(e[p]),q.push(o)}g.items.reset(q),g.updateAmount()},updateAmount:function(){var d=this,c=0;d.items.each(function(b){var e=b.get("quantity");"undefined"==typeof e&&(e=1),c+=b.get("price")*e}),d.set("amount",c)}})},{"../collections/productcollection.js":4,"./base.js":44,"./ordertype.js":48,"./product.js":50}],47:[function(f,e,h){var g=f("./base.js");e.exports=g.extend({defaults:{base:null,extension:null},initialize:function(){var b=this;g.prototype.initialize.call(b),b.on("sync",function(d,i){!i.error&&i.data&&b.trigger("ORDER_UPDATED",i.data)})},url:function(){var d=this,c=d.get("id");return window.API_PATH_ORDERITEM+(c?"/"+c:"")+".json"},save:function(i,d){var j=this;d||(d={}),(j.get("id")||"undefined"!=typeof i&&i.id)&&(d.patch=!0),i=_.extend({},j.clone().toJSON(),i),i=j.deleteGeneralAttributes(i),i=j.deleteAttribute(i,"variant"),i.base&&(i.base=j.deleteSubAttributes(i.base)),i.extension&&(i.extension=j.deleteSubAttributes(i.extension)),j.clear({silent:!0}),g.prototype.save.call(j,i,d)},deleteGeneralAttributes:function(d){var c=this;return d=c.deleteAttribute(d,"description_long"),d=c.deleteAttribute(d,"description_short"),d=c.deleteAttribute(d,"tags"),d=c.deleteAttribute(d,"variants"),d=c.deleteAttribute(d,"removable"),d=c.deleteAttribute(d,"split"),d=c.deleteAttribute(d,"splittable"),d=c.deleteAttribute(d,"selected_variant_id"),d=c.deleteAttribute(d,"url"),d=c.deleteAttribute(d,"customizable")},deleteSubAttributes:function(d){var c=this;return d=c.deleteGeneralAttributes(d),d=c.deleteAttribute(d,"base"),d=c.deleteAttribute(d,"extension"),d=c.deleteAttribute(d,"quantity"),d=c.deleteAttribute(d,"cooking_options"),d.variant&&(d.variant=c.deleteSubAttributes(d.variant)),d}})},{"./base.js":44}],48:[function(f,e,h){var g=f("./base.js");e.exports=g.extend({url:window.API_PATH_ORDERTYPE+".json",initialize:function(){var b=this;g.prototype.initialize.call(b),b.on("sync",function(i,k,j){switch(j.xhr.status){case 200:b.verified=!0,b.trigger("ORDERTYPE_VERIFIED");break;default:console.log("synced",i,k,j)}})}})},{"./base.js":44}],49:[function(f,e,h){var g=f("./base.js");e.exports=g.extend({verified:!1,check:0,url:window.API_PATH_PIN+".json",initialize:function(){var b=this;g.prototype.initialize.call(b),b.on("sync",function(i,k,j){switch(b.verified=!1,j.xhr.status){case 201:b.trigger("PIN_SENT");break;case 200:b.verified=!0,b.trigger("PIN_VERIFIED");break;case 204:b.trigger("USER_DOES_NOT_EXSIST");break;case 205:b.trigger("USER_EXSISTS");break;default:console.log("synced",i,k,j)}}).on("reset",function(){b.verified=!1})},sendPin:function(d){var c=this;c.set("phone",d),c.save()},validatePin:function(d){var c=this;c.get("id")&&(c.set("pin",d),c.save())},toJSON:function(){var d=this,c=g.prototype.toJSON.call(d);return d.check&&(c.check=d.check),c}})},{"./base.js":44}],50:[function(i,h,n){var m=i("./base.js"),l=i("./orderitem.js"),k=i("../collections/productvariantcollection.js"),j=i("./product_variant.js");h.exports=m.extend({variants:null,selectedVariant:null,orderitem:null,defaults:{split:!1,removable:!0,base:null,extension:null},url:function(){var e=this,d=e.get("id"),f=e.get("product_id");return d?window.API_PATH_ORDERITEM+"/"+d+".json":window.API_PATH_PRODUCT+(f?"/"+f:"")+".json"},initialize:function(){var b=this;m.prototype.initialize.call(b),b.types=new Backbone.Collection,b.variants=new k,b.orderitem=new l,b.orderitem.on("ORDER_UPDATED",function(c){b.trigger("ORDER_UPDATED",c)}),b.on("sync",function(e,g,f){switch(b.updateVariants(),f.xhr.status){case 201:break;case 200:b.trigger("PRODUCT_LOADED");break;default:console.log("synced",e,g,f)}}),b.on("change:selected_variant_id change:variants",function(){b.setSelectedVariant(),b.setPrice()}).on("change:price change:quantity",function(){b.setAmount()}),b.variants.on("change",function(){b.updateVariants()}),b.updateVariants(),b.setSelectedVariant()},load:function(d){var c=this;c.clear().set({product_id:d},{silent:!0}).fetch()},updateVariants:function(){var f=this,e=f.get("variants");if(e){for(var o in e){var g=f.variants.get(e[o].id);g||(g=new j(e[o]),f.variants.add(g,{silent:!0})),e[o]=g.toJSON()}f.setSelectedVariant(),f.set({variants:e},{silent:!0}).trigger("change:variants",f)}},setSelectedVariant:function(){var e=this,d=e.get("selected_variant_id");if(e.selectedVariant=e.variants.get(d),e.selectedVariant){e.set("variant",e.selectedVariant.toJSON())}else{if(d){var f=new j({id:d});e.set("variant",f.toJSON())}}},setPrice:function(){var f,e=this,o=e.get("selected_variant_id");if(o){var g=e.variants.get(o);g&&(f=parseInt(g.get("price")))}f||(f=e.get("price")),e.set("price",f)},setAmount:function(){var e=this,d=e.get("quantity"),f=e.get("price");"undefined"!=typeof d?(d=parseInt(d),e.set("quantity",d)):d=1,e.set("amount",f*d),e.set("removable",d&&2>d)},removeUnsplittableVariants:function(){var f=this;f.variants.each(function(c){c.get("splittable")||f.variants.remove(c)});var e=f.get("selected_variant_id"),o=f.variants.get(e);if(!o){var g=f.variants.at(0)?f.variants.at(0).get(j.prototype.idAttribute):null;f.set("selected_variant_id",g)}},removeUncustomizableVariants:function(){var f=this;f.variants.each(function(c){c.get("customizable")||f.variants.remove(c)});var e=f.get("selected_variant_id"),o=f.variants.get(e);if(!o){var g=f.variants.at(0)?f.variants.at(0).get(j.prototype.idAttribute):null;f.set("selected_variant_id",g)}},toJSON:function(){var d=this,c=m.prototype.toJSON.call(d);return c.extension&&(c.split=!0),c=d.deleteAttribute(c,"variants")},setOrderItem:function(){var b=this;b.orderitem.clear().set(b.toJSON()),b.orderitem.get("base")||b.orderitem.set("base",b.toJSON())},save:function(){var b=this;b.setOrderItem(),b.orderitem.save()},destroy:function(d){var c=this;return c.setOrderItem(),c.orderitem.destroy(),Backbone.Model.prototype.destroy.call(c,d)}})},{"../collections/productvariantcollection.js":5,"./base.js":44,"./orderitem.js":47,"./product_variant.js":51}],51:[function(h,g,l){var k=h("./base.js"),j=h("./ingredient.js"),i=h("../collections/ingredientcollection.js");g.exports=k.extend({defaults:{ingredients:{categories:[]}},initialize:function(){var b=this;k.prototype.initialize.call(b),b.on("change:ingredients",function(){b.setPrice()}).on("change:variant_id",function(){b.set({id:b.get("variant_id")})}),b.ingredients=new i,b.ingredients.on("change",function(){b.updateIngredients()}),b.updateIngredients()},setPrice:function(){var e,d=this;e=d.get("price");var f=0;d.ingredients.each(function(m){if(m.get("included")){f+=m.get("price");var c=m.get("extraModel");c&&c.get("included")&&(f+=c.get("price"))}}),d.set("price",e),d.set("totalPrice",e+f)},updateIngredients:function(){var m=this,e=m.get("ingredients");for(var q in e.categories){for(var p in e.categories[q].list){var o=e.categories[q].list[p][j.prototype.idAttribute],n=m.ingredients.get(o);n||(n=new j(e.categories[q].list[p]),m.ingredients.add(n,{silent:!0})),e.categories[q].list[p]=n.toJSON()}}m.set({ingredients:e},{silent:!0}).trigger("change:ingredients",m)}})},{"../collections/ingredientcollection.js":3,"./base.js":44,"./ingredient.js":45}],52:[function(g,f,j){var i=g("./base.js"),h=g("./restaurant/opening_hours.js");f.exports=i.extend({defaults:{name:"",address:"",postCode:"",city:"",isOpenNow:!1,openInfo:""},openingHours:[],url:function(){var b=this;return window.API_PATH_RESTAURANT_SEARCH+"?id="+b.id},initialize:function(){var b=this;i.prototype.initialize.call(b),b.openingHours=new h},fetchOpeningHours:function(e){if(e.get("restaurant")){var d=e.get("restaurant"),k=this;k.openingHours.set("restaurantId",d),k.openingHours.fetch({success:function(b){k.trigger("CHANGE_AVAILABLE_OPENING_HOURS",b.attributes),k.trigger("sync",arguments[0],arguments[1],arguments[2])},error:function(){k.trigger("NO_AVAILABLE_OPENING_HOURS"),k.trigger("error",arguments[0],arguments[1],arguments[2])}})}},fetchRestaurant:function(e){if(e.get("restaurant")){var d=e.get("restaurant"),k=this;k.set("id",d),k.fetch({success:function(){var b=k.attributes[0];k.trigger("CHANGE_RESTAURANT",b.name,b.address),k.trigger("sync",arguments[0],arguments[1],arguments[2])},error:function(){k.trigger("NO_RESTAURANT"),k.trigger("error",arguments[0],arguments[1],arguments[2])}})}}})},{"./base.js":44,"./restaurant/opening_hours.js":53}],53:[function(f,e,h){var g=f("../base.js");e.exports=g.extend({defaults:{restaurantId:0},url:function(){var b=this;return window.API_PATH_OPENING_HOURS+"?restaurant_id="+b.get("restaurantId")}})},{"../base.js":44}],54:[function(h,g,l){var k=h("./base.js"),j=h("./pin.js"),i=h("./order.js");g.exports=k.extend({loggedIn:!1,pin:null,order:null,url:function(){var e=this,d=e.get("id"),f="";return f=!d&&e.get("phone")&&e.get("password")&&e.get("passwordrepeat")&&!e.get("firstName")&&!e.get("lastName")?window.API_PATH_RESETPASSWORD:d||!e.get("phone")||!e.get("password")||e.get("firstName")||e.get("lastName")?d||!e.get("userID")||!e.get("accessToken")||e.get("firstName")||e.get("lastName")?window.API_PATH_CUSTOMER:window.API_PATH_LOGINFACEBOOK:window.API_PATH_LOGIN,f+".json"},initialize:function(){var b=this;k.prototype.initialize.call(b),b.pin=new j,b.pin.on("PIN_SENT",function(){b.set("phone",b.pin.get("phone"))}),b.pin.on("PIN_VERIFIED",function(){b.set("pin",b.pin.toJSON())}),b.order=new i},checkLogin:function(d){var c=this;c.fetch({success:function(){c.logInCompleted(),"function"==typeof d&&d()},error:function(){c.logInFailed(),"function"==typeof d&&d()}})},logIn:function(d){var c=this;c.clear().save(d,{success:function(b,f,e){switch(c.set({password:null,passwordrepeat:null}),e.xhr.status){case 200:c.logInCompleted();break;case 202:c.facebookAuth()}},error:function(){console.log("login error",arguments[0],arguments[1],arguments[2]),c.set({password:null,passwordrepeat:null}),c.logInFailed()}})},facebookAuth:function(){var b=this;b.loggedIn=!1,b.set("facebook",!0),b.trigger("LOGIN_FACEBOOK_AUTH")},logInCompleted:function(){var b=this;b.loggedIn=!0,b.order.fetch({success:function(){b.trigger("LOGIN_COMPLETED")},error:function(){b.trigger("LOGIN_COMPLETED")}})},logInFailed:function(){var b=this;b.loggedIn=!1,b.trigger("LOGIN_FAILED")},register:function(d){var c=this;c.save(d,{success:function(){c.set({password:null,passwordrepeat:null}),c.trigger("REGISTRATION_COMPLETED")},error:function(){c.set({password:null,passwordrepeat:null})}})},resetPassword:function(d){var c=this;c.clear().save(d,{success:function(){c.set({password:null,passwordrepeat:null}),c.trigger("PASSWORD_RESET")},error:function(){c.set({password:null,passwordrepeat:null})}})},toJSON:function(){var d=this,c=k.prototype.toJSON.call(d);return d.pin&&(c.pin=d.pin.toJSON()),c},searchCorporate:function(e){var d=this,f=window.API_PATH+"/business.json";$.ajax({url:f,dataType:"json",data:{query:e},success:function(b){d.trigger("CORPORATE_USER_FOUND",b.data)},error:function(b){d.trigger("CORPORATE_USER_NOT_FOUND",b)}})}})},{"./base.js":44,"./order.js":46,"./pin.js":49}]},{},[43]);